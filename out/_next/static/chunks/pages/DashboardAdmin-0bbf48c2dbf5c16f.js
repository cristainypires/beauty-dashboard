(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{8987:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DashboardAdmin",function(){return s(7518)}])},7065:function(e,a,s){"use strict";s.d(a,{u:function(){return i}});var t=s(5893);s(7294);var r=s(718),o=s(220),l=s(8527);function i(e){let{cliente:a,servico:s,profissional:i,data:n,hora:c,telefone:d,status:x,obs:m,clickable:u=!0,onItemClick:p,onClienteClick:h,onRemarcar:g,onCancelar:b}=e,f="confirmado"===x,v=a&&a.trim()?a:"Sem nome",j=d&&d.trim()?d:"Sem telefone",N=s&&s.trim()?s:"Sem servi\xe7o",y=x&&x.trim()?x:"Sem status";return(0,t.jsxs)("div",{className:"group flex flex-col md:flex-row items-start md:items-center justify-between p-2 sm:p-6 bg-gradient-to-br from-[#eed953]/20 via-white to-[#eed953]/20 rounded-2xl md:rounded-[2rem] border border-transparent hover:border-[#b5820e]/20 transition-all gap-4 shadow-sm w-full",children:[(0,t.jsxs)("div",{onClick:p,className:"flex flex-col md:flex-row items-start md:items-center gap-4 md:gap-6 w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col-2 gap-5 md:flex-col items-center justify-center text-[#b5820e] flex-shrink-0",children:[(0,t.jsx)("span",{className:"text-[12px] sm:text-[12px] font-bold uppercase opacity-70",children:"Hora"}),(0,t.jsx)("span",{className:"text-xl sm:text-2xl font-extrabold",children:c}),(0,t.jsx)("span",{className:"text-[10px] sm:text-[12px] text-gray-800 mt-1",children:new Date(n).toLocaleDateString("pt-PT",{day:"2-digit",month:"short",year:"numeric"})})]}),(0,t.jsxs)("div",{className:"flex-1 p-3 sm:p-4 rounded-xl transition-all duration-300 ".concat(u?"cursor-pointer ":"cursor-default"),onClick:u?h:void 0,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-1",children:[(0,t.jsx)(r.Z,{size:20,className:"text-[#b5820e]"}),(0,t.jsx)("span",{className:"text-sm sm:text-lg font-bold text-black",children:v})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,t.jsxs)("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:["\uD83D\uDCDE ",j]})}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-1 flex-wrap",children:[(0,t.jsx)("span",{className:"text-[11px] sm:text-sm font-semibold text-gray-800",children:N}),i&&(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 italic ml-2",children:i})]}),m&&(0,t.jsx)("p",{className:"text-[10px] text-blue-500 mt-2 italic",children:m})]}),(0,t.jsx)("span",{className:"text-[10px] uppercase font-bold px-2 sm:px-3 py-1 rounded-full ".concat(function(e){switch(e){case"confirmado":return"bg-green-100 text-green-700";case"pendente":return"bg-yellow-100 text-yellow-700";case"cancelado":return"bg-red-100 text-red-700";case"reagendado":return"bg-blue-100 text-blue-700";case"concluido":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}}(x)),children:y})]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full md:w-auto justify-end mt-2 md:mt-0",children:[(0,t.jsxs)("button",{disabled:!f,onClick:f?g:void 0,className:"flex-1 md:flex-none px-3 sm:px-4 py-2 rounded-lg border font-bold text-[10px] uppercase flex items-center justify-center gap-1 sm:gap-2 transition-all\n            ".concat(f?"bg-white text-black hover:text-[#b5820e]":"bg-gray-100 text-gray-400 cursor-not-allowed","\n          "),children:[(0,t.jsx)(o.Z,{size:12})," Remarcar"]}),(0,t.jsx)("button",{disabled:!f,onClick:f?b:void 0,className:"p-2 sm:p-3 rounded-lg border transition-all\n            ".concat(f?"bg-white text-red-400 hover:text-red-600":"bg-gray-100 text-gray-300 cursor-not-allowed","\n          "),children:(0,t.jsx)(l.Z,{size:18})})]})]})}},7518:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return eE}});var t=s(5893),r=s(7294),o=s(4279);let l=async()=>{try{return(await o.Z.get("/admin/servicos")).data}catch(a){var e;if((null===(e=a.response)||void 0===e?void 0:e.status)===404)return console.warn("[FALLBACK] Rota /admin/servicos n\xe3o encontrada. Retornando dados vazios."),[];throw a}},i=async e=>{let a={nome_servico:e.nome,duracao_minutos:e.duracao,preco:e.preco};return(await o.Z.post("/admin/servicos",a)).data},n=async(e,a)=>{let s={nome_servico:a.nome,duracao_minutos:a.duracao,preco:a.preco,ativo:a.ativo};return(await o.Z.put("/admin/servicos/".concat(e),s)).data},c=async e=>(await o.Z.delete("/admin/servicos/".concat(e))).data,d=async()=>{try{return(await o.Z.get("/admin/funcionarios")).data}catch(a){var e;if((null===(e=a.response)||void 0===e?void 0:e.status)===404)return console.warn("[FALLBACK] Rota /admin/funcionarios n\xe3o encontrada. Retornando dados vazios."),[];throw a}},x=async e=>{let a={nome:e.nome,apelido:e.apelido,email:e.email,numero_telefone:e.telefone,data_nascimento:e.nascimento,palavra_passe:e.senha,funcao_especialidade:e.especialidade};return(await o.Z.post("/admin/funcionarios",a)).data},m=async(e,a)=>{let s={nome:a.nome,apelido:a.apelido,email:a.email,numero_telefone:a.telefone,data_nascimento:a.nascimento,funcao_especialidade:a.especialidade,ativo:"Ativo"===a.status,servicos_ids:a.servicos_ids};return a.senha&&a.senha.length>=8&&(s.palavra_passe=a.senha),(await o.Z.put("/admin/funcionarios/".concat(e),s)).data},u=async e=>(await o.Z.delete("/admin/funcionarios/".concat(e))).data,p=async()=>{try{return(await o.Z.get("/admin/clientes")).data}catch(a){var e;if((null===(e=a.response)||void 0===e?void 0:e.status)===404)return console.warn("[FALLBACK] Rota /admin/clientes n\xe3o encontrada. Retornando dados vazios."),[];throw a}},h=async e=>(await o.Z.post("/admin/clientes/".concat(e,"/desativar"))).data,g=async e=>(await o.Z.post("/admin/clientes/".concat(e,"/ativar"))).data,b=async()=>{try{return(await o.Z.get("/admin/agendamentos")).data}catch(a){var e;if((null===(e=a.response)||void 0===e?void 0:e.status)===404)return console.warn("[FALLBACK] Rota /admin/agendamentos n\xe3o encontrada. Retornando dados mock."),[];throw a}},f=async e=>(await o.Z.patch("/admin/agendamentos/".concat(e,"/cancelar"))).data,v=async(e,a)=>(await o.Z.patch("/admin/agendamentos/".concat(e,"/reagendar"),a)).data,j={listar:async()=>(await o.Z.get("/admin/promocoes")).data,criar:async e=>(await o.Z.post("/admin/promocoes",e)).data,atualizar:async(e,a)=>(await o.Z.put("/admin/promocoes/".concat(e),a)).data,remover:async e=>(await o.Z.delete("/admin/promocoes/".concat(e))).data},N={listar:async()=>(await o.Z.get("/admin/logs")).data};var y=s(8088),w=s(7969),k=s(7963),C=s(4822),S=s(7749),z=s(4088),Z=s(8453),A=s(1952),E=s(6461),R=s(1565),D=s(5930),_=s(7553),P=s(4528),L=s(5451);function I(e){let{onVoltar:a,onSubmit:s,servicoParaEditar:o}=e,[l,i]=(0,r.useState)(""),[n,c]=(0,r.useState)(""),[d,x]=(0,r.useState)(""),[m,u]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{o&&(i(o.nome),c(o.duracao),x(o.preco),u(o.ativo))},[o]),(0,t.jsxs)("div",{className:"rounded-3xl   p-6 sm:p-10 max-w-5xl mx-auto animate-in fade-in slide-in-from-bottom-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 mb-8",children:[(0,t.jsx)("button",{onClick:a,className:"text-[#b5820e] font-bold hover:underline text-sm w-fit",children:"← Voltar"}),(0,t.jsx)("h2",{className:"text-2xl sm:text-3xl font-serif font-black text-black",children:o?"Editar Servi\xe7o":"Cadastrar Novo Servi\xe7o"})]}),(0,t.jsxs)("form",{className:"space-y-6",onSubmit:e=>e.preventDefault(),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2",children:"Nome do Servi\xe7o"}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),className:"w-full p-4 bg-gray-50 rounded-2xl border border-transparent focus:border-[#b5820e] focus:ring-2 focus:ring-[#b5820e] outline-none text-sm",placeholder:"Ex: Limpeza de Pele"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2",children:"Dura\xe7\xe3o (min)"}),(0,t.jsx)("input",{type:"number",value:n,onChange:e=>c(""===e.target.value?"":Number(e.target.value)),className:"w-full p-4 bg-gray-50 rounded-2xl border border-transparent focus:border-[#b5820e] focus:ring-2 focus:ring-[#b5820e] outline-none text-sm",placeholder:"60"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2",children:"Pre\xe7o (CVE)"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:d,onChange:e=>x(""===e.target.value?"":Number(e.target.value)),className:"w-full p-4 bg-gray-50 rounded-2xl border border-transparent focus:border-[#b5820e] focus:ring-2 focus:ring-[#b5820e] outline-none text-sm",placeholder:"2500.00"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"checkbox",checked:m,onChange:e=>u(e.target.checked),className:"w-5 h-5 accent-[#b5820e]"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Servi\xe7o ativo para agendamentos"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{if(!l||!n||!d){alert("Por favor, preencha todos os campos corretamente!");return}s({nome:l,duracao:Number(n),preco:Number(d),ativo:m}),o||(i(""),c(""),x(""),u(!0))},className:"w-full py-4 bg-black text-[#b5820e] rounded-2xl font-black uppercase tracking-widest hover:opacity-90 transition shadow-lg text-sm",children:o?"Salvar Altera\xe7\xf5es":"Cadastrar Servi\xe7o"})]})]})}var O=s(858),M=s(2608),T=s(9191);function V(e){let{funcionarios:a,onVoltar:s,onNovoFuncionario:r,onEditarFuncionario:o,onRemover:l}=e;return(0,t.jsxs)("div",{className:"min-h-screen bg-white p-4 sm:p-8",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto mb-10",children:[(0,t.jsxs)("button",{onClick:s,className:"flex items-center gap-2 text-[#b5820e] font-bold mb-6 hover:opacity-70 transition-all group",children:[(0,t.jsx)(_.Z,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"Voltar ao Painel"]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl sm:text-5xl font-serif font-black uppercase tracking-tighter text-gray-900 leading-none",children:"Gest\xe3o de Equipa"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm sm:text-base mt-3 font-medium uppercase tracking-widest",children:"Profissionais Maddie Tavares Beauty Boutique"})]}),(0,t.jsxs)("button",{onClick:r,className:"bg-black text-white px-8 py-4 rounded-2xl font-black uppercase text-xs tracking-widest flex items-center justify-center gap-3 hover:bg-gray-900 transition-all shadow-xl active:scale-95",children:[(0,t.jsx)(O.Z,{size:18}),"Novo Profissional"]})]})]}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:0===a.length?(0,t.jsx)("div",{className:"col-span-full text-center py-24 bg-gray-50 rounded-[2.5rem] border-2 border-dashed border-gray-200",children:(0,t.jsx)("p",{className:"text-gray-400 font-bold text-lg uppercase tracking-tighter",children:"Nenhum profissional registado."})}):a.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-[2.5rem] p-8 border  shadow-sm hover:shadow-2xl hover:border-[#b5820e]/30 transition-all duration-500 group",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-black text-[#b5820e] flex items-center justify-center font-black text-2xl shadow-lg group-hover:scale-110 transition-transform duration-500",children:e.nome?e.nome[0].toUpperCase():"?"}),(0,t.jsx)("span",{className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ".concat("Ativo"===e.status?"bg-green-50 text-green-600 border-green-100":"bg-red-50 text-red-600 border-red-100"),children:e.status})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h3",{className:"text-2xl font-black text-gray-900 leading-tight mb-1",children:e.nome}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[#b5820e]",children:[(0,t.jsx)(C.Z,{size:14}),(0,t.jsx)("span",{className:"text-[10px] uppercase font-black tracking-[0.15em]",children:e.especialidade||"Especialidade n\xe3o def."})]})]}),(0,t.jsxs)("div",{className:"space-y-2.5 mb-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4  p-3 rounded-xl border border-transparent hover:border-gray-100 transition-colors",children:[(0,t.jsx)(M.Z,{size:16,className:"text-gray-400"}),(0,t.jsx)("span",{className:"text-xs font-bold text-gray-600 truncate",children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4  p-3 rounded-xl border border-transparent hover:border-gray-100 transition-colors",children:[(0,t.jsx)(T.Z,{size:16,className:"text-gray-400"}),(0,t.jsx)("span",{className:"text-xs font-bold text-gray-600",children:e.telefone})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-6 border-t border-gray-50",children:[(0,t.jsxs)("button",{onClick:()=>o(e),className:"flex items-center justify-center gap-2 py-3 rounded-xl hover:bg-gray-50 text-gray-800 font-black text-[10px] uppercase tracking-widest transition-all",children:[(0,t.jsx)(R.Z,{size:14})," Configura\xe7\xf5es"]}),(0,t.jsxs)("button",{onClick:()=>l(e.id),className:"flex items-center justify-center gap-2 py-3 rounded-xl hover:bg-red-50 text-red-500 font-black text-[10px] uppercase tracking-widest transition-all",children:[(0,t.jsx)(L.Z,{size:14})," Remover"]})]})]},e.id))})]})}var q=s(718),F=s(3785),Y=s(3460),B=s(7233),U=s(3980),H=s(7326),G=s(7725),$=s(5809),K=s(7372);function X(e){let{onVoltar:a,onSalvar:s,funcionarioParaEditar:o}=e,i=!!o,[n,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)({}),[m,u]=(0,r.useState)([]),[p,h]=(0,r.useState)([]),[g,b]=(0,r.useState)({nome:"",apelido:"",email:"",telefone:"",nascimento:"",especialidade:"",senha:"",status:"Ativo",servicos_ids:[]});(0,r.useEffect)(()=>{(async()=>{try{let e=await l(),a=Array.isArray(e)?e:(null==e?void 0:e.data)||[];u(a)}catch(e){console.error("Erro ao carregar servi\xe7os:",e)}})(),o&&(b({nome:o.nome||"",apelido:o.apelido||"",email:o.email||"",telefone:o.telefone||"",nascimento:o.data_nascimento||o.nascimento||"",status:!1!==o.ativo?"Ativo":"Inativo",especialidade:o.especialidade||"",servicos_ids:o.servicos_ids||[],senha:""}),o.servicos_ids&&h(o.servicos_ids))},[o]);let f=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),v=e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(e),j=e=>{h(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},N=async e=>{e.preventDefault();let a={};if(g.telefone&&7!==g.telefone.length&&(a.telefone="O telefone deve ter exatamente 7 d\xedgitos."),f(g.email)||(a.email="Insira um formato de email v\xe1lido."),i&&!g.senha||v(g.senha||"")||(a.senha="Senha fraca: use min. 8 caracteres, Mai\xfascula, Min\xfascula, N\xfamero e S\xedmbolo."),0===p.length&&(a.servicos="Selecione pelo menos um servi\xe7o para o profissional."),Object.keys(a).length>0){x(a);return}x({});try{s&&await s({...g,servicos_ids:p})}catch(e){alert("Erro ao guardar dados. Verifique email/telefone duplicados.")}};return(0,t.jsxs)("div",{className:"rounded-[2.5rem] max-w-5xl mx-auto overflow-hidden bg-white shadow-2xl border border-gray-100",children:[(0,t.jsxs)("div",{className:"p-6 sm:p-8 flex items-center justify-between border-b bg-gray-50/50",children:[(0,t.jsxs)("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 rounded-xl hover:bg-white hover:shadow-sm transition text-[#b5820e] font-bold",children:[(0,t.jsx)(_.Z,{size:20})," Voltar"]}),(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-black text-black uppercase tracking-tighter",children:i?"Editar Profissional":"Novo Profissional"}),(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#b5820e]/10 flex items-center justify-center",children:(0,t.jsx)(q.Z,{className:"text-[#b5820e]",size:20})})]}),(0,t.jsxs)("form",{onSubmit:N,className:"p-6 sm:p-10 space-y-10",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsx)(W,{label:"Nome Pr\xf3prio",icon:(0,t.jsx)(q.Z,{size:16}),value:g.nome,onChange:e=>b({...g,nome:e}),required:!0}),(0,t.jsx)(W,{label:"Apelido / Sobrenome",value:g.apelido||"",onChange:e=>b({...g,apelido:e}),required:!0}),(0,t.jsxs)("div",{children:[(0,t.jsx)(W,{label:"Email Profissional",icon:(0,t.jsx)(M.Z,{size:16}),type:"email",value:g.email,onChange:e=>b({...g,email:e.toLowerCase().trim()}),required:!0}),d.email&&(0,t.jsx)(J,{message:d.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(W,{label:"Telefone (7 d\xedgitos)",icon:(0,t.jsx)(T.Z,{size:16}),value:g.telefone||"",onChange:e=>{let a=e.replace(/\D/g,"").slice(0,7);b({...g,telefone:a})},required:!0}),d.telefone&&(0,t.jsx)(J,{message:d.telefone})]}),(0,t.jsx)(W,{label:"Data de Nascimento",icon:(0,t.jsx)(y.Z,{size:16}),type:"date",value:g.nascimento||"",onChange:e=>b({...g,nascimento:e})}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(Q,{children:"Servi\xe7os Habilitados (Associa\xe7\xe3o ao Profissional)"}),d.servicos&&(0,t.jsx)(J,{message:d.servicos}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mt-4 max-h-64 overflow-y-auto pr-2 custom-scrollbar",children:m.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>j(e.id),className:"flex items-center justify-between p-4 rounded-2xl border-2 transition-all ".concat(p.includes(e.id)?"border-[#b5820e] bg-amber-50 shadow-sm":"border-gray-100 bg-gray-50 text-gray-400 opacity-70"),children:[(0,t.jsxs)("div",{className:"flex flex-col text-left",children:[(0,t.jsx)("span",{className:"text-[10px] font-black uppercase text-gray-900 leading-tight",children:e.nome_servico||e.nome}),(0,t.jsxs)("span",{className:"text-[9px] font-bold text-[#b5820e] mt-1",children:[e.preco," CVE"]})]}),p.includes(e.id)?(0,t.jsx)("div",{className:"w-6 h-6 bg-[#b5820e] rounded-full flex items-center justify-center animate-in zoom-in",children:(0,t.jsx)(F.Z,{size:14,className:"text-white"})}):(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-gray-200 rounded-full"})]},e.id))})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(Q,{children:i?"Alterar Senha (opcional)":"Definir Palavra-passe de Acesso"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(Y.Z,{className:"absolute left-4 top-4 text-gray-300",size:16}),(0,t.jsx)("input",{type:n?"text":"password",className:"w-full p-4 pl-12 pr-12 rounded-2xl bg-gray-50 focus:ring-2 focus:ring-[#b5820e] outline-none transition-all ".concat(d.senha?"border-red-500 ring-1 ring-red-500":""),value:g.senha,onChange:e=>b({...g,senha:e.target.value}),required:!i,placeholder:"M\xedn. 8 chars, A-z, 0-9, @#$"}),(0,t.jsx)("button",{type:"button",onClick:()=>c(!n),className:"absolute right-4 top-4 text-gray-400 hover:text-[#b5820e]",children:n?(0,t.jsx)(B.Z,{size:18}):(0,t.jsx)(U.Z,{size:18})})]}),d.senha&&(0,t.jsx)(J,{message:d.senha})]}),(0,t.jsxs)("div",{className:"md:col-span-2 flex items-center justify-between bg-gray-900 text-white p-6 rounded-[1.5rem] shadow-xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-sm",children:"Estado da Conta"}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest mt-1",children:"Bloqueia ou permite o login do profissional"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>b({...g,status:"Ativo"===g.status?"Inativo":"Ativo"}),className:"flex items-center gap-3 px-5 py-2 rounded-xl font-black text-[10px] uppercase transition-all ".concat("Ativo"===g.status?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"),children:["Ativo"===g.status?(0,t.jsx)(H.Z,{size:28}):(0,t.jsx)(G.Z,{size:28}),g.status]})]})]}),(0,t.jsxs)("button",{type:"submit",className:"w-full bg-black text-[#b5820e] py-6 rounded-[1.5rem] font-black uppercase tracking-[0.3em] flex justify-center items-center gap-4 hover:bg-gray-800 transition-all shadow-2xl active:scale-[0.98]",children:[(0,t.jsx)($.Z,{size:22}),i?"Guardar Altera\xe7\xf5es":"Finalizar Registo"]})]})]})}function W(e){let{label:a,icon:s,type:r="text",value:o,onChange:l,required:i}=e;return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(Q,{children:a}),(0,t.jsxs)("div",{className:"relative",children:[s&&(0,t.jsx)("span",{className:"absolute left-4 top-4 text-gray-300",children:s}),(0,t.jsx)("input",{type:r,value:o,required:i,onChange:e=>l(e.target.value),className:"w-full p-4 rounded-2xl bg-gray-50 focus:ring-2 focus:ring-[#b5820e] outline-none transition-all ".concat(s?"pl-12":"pl-6")})]})]})}function J(e){let{message:a}=e;return(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-2 ml-2 text-red-500 animate-pulse",children:[(0,t.jsx)(K.Z,{size:14}),(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-tight",children:a})]})}function Q(e){let{children:a}=e;return(0,t.jsx)("label",{className:"text-[10px] font-black uppercase text-gray-400 tracking-[0.15em] ml-2 mb-2 block",children:a})}var ee=s(4672);function ea(e){let{logs:a,onVoltar:s}=e,[o,l]=(0,r.useState)(""),[i,n]=(0,r.useState)("TODOS"),[c,d]=(0,r.useState)(""),[x,m]=(0,r.useState)(1),u=(0,r.useMemo)(()=>a.filter(e=>{let a=(e.descricao||"").toLowerCase().includes(o.toLowerCase())||(e.detalhes||"").toLowerCase().includes(o.toLowerCase()),s="TODOS"===i||e.ator===i,t=!c||e.data===c;return a&&s&&t}),[a,o,i,c]),p=Math.ceil(u.length/5),h=u.slice((x-1)*5,5*x);return(0,t.jsxs)("div",{className:" rounded-[2.5rem] overflow-hidden",children:[(0,t.jsx)("div",{className:" p-6 sm:p-8 flex flex-col sm:flex-row justify-between gap-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-full text-[#b5820e]",children:(0,t.jsx)(_.Z,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-serif font-black text-black uppercase",children:"Auditoria & Logs"}),(0,t.jsx)("p",{className:"text-gray-400 text-[9px]  tracking-[0.3em]",children:"Rastreabilidade total do sistema"})]})]})}),(0,t.jsxs)("div",{className:"p-4 sm:p-6  flex flex-wrap gap-4 text-black",children:[(0,t.jsxs)("div",{className:"relative flex-1 min-w-[220px]",children:[(0,t.jsx)(ee.Z,{className:"absolute left-4 top-3 text-gray-400",size:18}),(0,t.jsx)("input",{value:o,onChange:e=>{m(1),l(e.target.value)},placeholder:"Pesquisar logs...",className:"w-full pl-12 p-3 rounded-xl border border-gray-200 text-sm"})]}),(0,t.jsxs)("select",{value:i,onChange:e=>{m(1),n(e.target.value)},className:"p-3 rounded-xl border border-gray-200 text-sm",children:[(0,t.jsx)("option",{value:"TODOS",children:"Todos os Atores"}),(0,t.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,t.jsx)("option",{value:"SISTEMA",children:"Sistema"}),(0,t.jsx)("option",{value:"CLIENTE",children:"Cliente"}),(0,t.jsx)("option",{value:"FUNCION\xc1RIO",children:"Funcion\xe1rio"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(y.Z,{className:"absolute left-3 top-3 text-gray-400",size:16}),(0,t.jsx)("input",{type:"date",value:c,onChange:e=>{m(1),d(e.target.value)},className:"pl-10 p-3 rounded-xl border border-gray-200 text-sm"})]})]}),(0,t.jsxs)("div",{className:"p-4 sm:p-8 space-y-4",children:[h.map(e=>(0,t.jsxs)("div",{className:"p-4 rounded-2xl border border-gray-100 text-black hover:shadow-md transition flex flex-col sm:flex-row gap-4 bg-gray-50",children:[(0,t.jsxs)("div",{className:"min-w-[80px] text-center sm:text-left",children:[(0,t.jsx)("p",{className:"text-[10px]",children:e.data||"Data N/D"}),(0,t.jsx)("p",{className:"text-sm font-mono font-bold text-[#b5820e]",children:e.hora||"00:00"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"text-[9px] px-2 py-1 rounded font-black uppercase ".concat("ADMIN"===e.ator?"bg-black text-[#b5820e]":"bg-gray-200 text-gray-600"),children:e.ator||"SEM ATOR"}),(0,t.jsx)("p",{className:"font-bold text-sm mt-1",children:e.descricao||"Sem descri\xe7\xe3o dispon\xedvel"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 font-mono",children:e.detalhes||"Sem detalhes"})]})]},e.id)),0===h.length&&(0,t.jsx)("p",{className:"text-center text-sm text-gray-400 mt-10",children:"Nenhum log encontrado."})]}),p>1&&(0,t.jsx)("div",{className:"p-6 flex justify-center gap-2",children:Array.from({length:p}).map((e,a)=>(0,t.jsx)("button",{onClick:()=>m(a+1),className:"w-9 h-9 rounded-lg font-bold text-sm ".concat(x===a+1?"bg-[#b5820e] text-black":"border border-gray-200 text-gray-400 hover:border-[#b5820e]"),children:a+1},a))})]})}var es=s(220),et=s(3552),er=s(8253),eo=s(1526),el=s(6451),ei=s(5908),en=s(7484),ec=s.n(en),ed=s(6607),ex=s.n(ed);function em(e){let{agendamentos:a,servicos:s,onVoltar:o}=e,[l,i]=(0,r.useState)(!1),n=ec()(),c=(0,r.useMemo)(()=>s.reduce((e,a)=>(e[a.nome.toLowerCase()]=Number(a.preco),e),{}),[s]),d=(e,s)=>{let t=a.filter(a=>ec()(a.dataISO).isBetween(e.startOf("day"),s.endOf("day"),null,"[]")&&"concluido"===a.status.toLowerCase()),r={},o=0;return t.forEach(e=>{let a=c[e.servico.toLowerCase()]||0;o+=a,r[e.servico]||(r[e.servico]={total:0,qtd:0}),r[e.servico].total+=a,r[e.servico].qtd+=1}),{total:o,porServico:r,count:t.length}},x={diario:(0,r.useMemo)(()=>d(n,n),[a,c]),semanal:(0,r.useMemo)(()=>d(n.startOf("week"),n.endOf("week")),[a,c]),mensal:(0,r.useMemo)(()=>d(n.startOf("month"),n.endOf("month")),[a,c]),anual:(0,r.useMemo)(()=>d(n.startOf("year"),n.endOf("year")),[a,c])};return(0,t.jsxs)("div",{className:"bg-white rounded-[2.5rem]  overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-700 border border-gray-100",children:[(0,t.jsx)("div",{className:"bg-[#0a0a0a] p-8 sm:p-10",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-5",children:[(0,t.jsx)("button",{onClick:o,className:"group p-3 bg-white/5 hover:bg-[#b5820e] rounded-2xl transition-all duration-300",children:(0,t.jsx)(_.Z,{size:24,className:"text-[#b5820e] group-hover:text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),(0,t.jsx)("p",{className:"text-gray-400 text-[10px] uppercase font-bold tracking-[0.3em]",children:"Live Financial Insight"})]}),(0,t.jsxs)("h2",{className:"text-3xl sm:text-4xl font-serif font-black text-white uppercase tracking-tighter",children:["Performance ",(0,t.jsx)("span",{className:"text-[#b5820e]",children:"Financeira"})]})]})]}),(0,t.jsxs)("button",{onClick:()=>{i(!0),setTimeout(()=>i(!1),2e3)},disabled:l,className:"group relative overflow-hidden bg-white text-black px-8 py-4 rounded-2xl font-black text-xs uppercase flex items-center gap-3 hover:pr-10 transition-all disabled:opacity-50",children:[l?(0,t.jsx)(es.Z,{className:"animate-spin",size:18}):(0,t.jsx)(et.Z,{size:18}),l?"Sincronizando...":"Exportar Primavera ERP"]})]})}),(0,t.jsxs)("div",{className:"p-8 sm:p-10 space-y-10",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[{label:"Hoje",val:x.diario,icon:(0,t.jsx)(er.Z,{className:"text-blue-500"}),color:"blue"},{label:"Semana",val:x.semanal,icon:(0,t.jsx)(z.Z,{className:"text-[#b5820e]"}),color:"gold"},{label:"M\xeas Atual",val:x.mensal,icon:(0,t.jsx)(y.Z,{className:"text-purple-500"}),color:"purple"},{label:"Ano Fiscal",val:x.anual,icon:(0,t.jsx)(eo.Z,{className:"text-green-500"}),color:"green"}].map((e,a)=>(0,t.jsxs)("div",{className:"relative group p-8 bg-gray-50 rounded-[2rem] border border-gray-100 hover:bg-white hover:shadow-xl hover:shadow-gray-200/50 transition-all duration-500",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsx)("div",{className:"p-3 bg-white rounded-xl shadow-sm",children:e.icon}),(0,t.jsx)("div",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e.label})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-3xl font-black text-black mb-1",children:[e.val.total.toLocaleString(),(0,t.jsx)("span",{className:"text-xs font-medium ml-1 text-gray-400",children:"CVE"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-500",children:[(0,t.jsx)(el.Z,{size:12,className:"text-green-500"}),e.val.count," Servi\xe7os Conclu\xeddos"]})]})]},a))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-gray-900 rounded-[2.5rem] p-8 sm:p-10 text-white shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h3",{className:"text-xl font-serif font-bold uppercase italic tracking-tighter",children:"Ranking de Rentabilidade (M\xeas)"}),(0,t.jsx)(ei.Z,{className:"text-[#b5820e]"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[Object.entries(x.mensal.porServico).sort((e,a)=>a[1].total-e[1].total).slice(0,5).map((e,a)=>{let[s,r]=e,o=r.total/x.mensal.total*100;return(0,t.jsxs)("div",{className:"group",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs font-bold uppercase mb-2 tracking-widest",children:[(0,t.jsxs)("span",{className:"flex gap-3",children:[(0,t.jsxs)("span",{className:"text-[#b5820e]",children:["0",a+1,"."]})," ",s]}),(0,t.jsxs)("span",{children:[r.total.toLocaleString()," CVE"]})]}),(0,t.jsx)("div",{className:"h-3 bg-white/5 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-[#b5820e] to-yellow-200 transition-all duration-1000 ease-out",style:{width:"".concat(o,"%")}})})]},s)}),0===Object.keys(x.mensal.porServico).length&&(0,t.jsx)("div",{className:"py-10 text-center text-gray-500 text-sm italic",children:"Nenhum faturamento registrado no per\xedodo selecionado."})]})]}),(0,t.jsxs)("div",{className:"bg-[#b5820e] rounded-[2.5rem] p-10 text-black flex flex-col justify-between relative overflow-hidden group",children:[(0,t.jsx)(E.Z,{size:120,className:"absolute -top-4 -right-4 text-black/10 group-hover:scale-110 transition-transform duration-700"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xs font-black uppercase tracking-[0.2em] mb-2 opacity-70",children:"Status Mensal"}),(0,t.jsx)("p",{className:"text-4xl font-black leading-tight italic",children:"FOCO NA META DE CRESCIMENTO"})]}),(0,t.jsxs)("div",{className:"mt-10",children:[(0,t.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest mb-1",children:"M\xe9dia por Servi\xe7o"}),(0,t.jsxs)("p",{className:"text-3xl font-black",children:[x.mensal.count>0?Math.round(x.mensal.total/x.mensal.count).toLocaleString():0,(0,t.jsx)("span",{className:"text-sm font-bold ml-1",children:"CVE"})]})]})]})]})]})]})}ec().extend(ex());var eu=s(7065);function ep(e){let{agendamentos:a,onVoltar:s,onCancelar:o,onReagendar:l}=e,[i,n]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),x=a.filter(e=>{let a=!i||new Date(e.data).toISOString().slice(0,10)===i,s=e.cliente.toLowerCase().includes(c.toLowerCase())||e.servico.toLowerCase().includes(c.toLowerCase());return a&&s});return(0,t.jsxs)("div",{className:" rounded-[2.5rem]  overflow-hidden",children:[(0,t.jsxs)("div",{className:" p-6 sm:p-8 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:s,className:"p-2  rounded-full transition text-[#b5820e] hover:bg-[#b5820e] hover:text-black",children:(0,t.jsx)(_.Z,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-black text-black uppercase",children:"Agenda Geral"}),(0,t.jsx)("p",{className:"text-gray-400 text-[10px] uppercase tracking-[0.3em]",children:"Visual em cart\xf5es"})]})]}),(0,t.jsx)(y.Z,{className:"text-[#b5820e]",size:30})]}),(0,t.jsxs)("div",{className:"p-4 sm:p-6  flex flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-[220px] relative",children:[(0,t.jsx)(ee.Z,{className:"absolute left-4 top-3.5 text-gray-400",size:18}),(0,t.jsx)("input",{value:c,onChange:e=>d(e.target.value),type:"text",placeholder:"Pesquisar cliente ou servi\xe7o...",className:"w-full p-3.5 pl-12 bg-white rounded-2xl border border-gray-200 focus:ring-2 focus:ring-[#b5820e] outline-none text-sm shadow-sm"})]}),(0,t.jsx)("input",{type:"date",value:i,onChange:e=>n(e.target.value),className:"p-3.5 bg-white rounded-2xl border border-gray-200 text-sm font-bold shadow-sm cursor-pointer focus:ring-2 focus:ring-[#b5820e] outline-none"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[x.map(e=>(0,t.jsx)(eu.u,{id:e.id,cliente:e.cliente,telefone:e.telefone||"",servico:"".concat(e.servico," • ").concat(e.profissional),profissional:e.profissional,data:e.data,hora:e.hora,status:e.status,clickable:!0,onItemClick:()=>{},onClienteClick:()=>{},onCancelar:()=>o(e.id),onRemarcar:()=>l(e.id)},e.id)),0===x.length&&(0,t.jsx)("p",{className:"text-center text-sm text-gray-400 py-8",children:"Nenhum agendamento encontrado."})]})]})}var eh=s(3113),eg=s(5682);function eb(e){var a;let{cliente:s,onVoltar:r}=e;return(0,t.jsxs)("div",{className:"max-w-3xl mx-auto bg-white rounded-3xl p-8 shadow-lg border border-gray-200",children:[(0,t.jsxs)("button",{onClick:r,className:"text-[#b5820e] mb-6 flex items-center gap-2 font-semibold hover:text-amber-600 transition-colors",children:[(0,t.jsx)(_.Z,{})," Voltar"]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h2",{className:"text-3xl font-extrabold text-gray-900",children:[s.nome," ",s.apelido]}),(0,t.jsxs)("p",{className:"text-gray-500 text-sm mt-1 italic",children:["Cliente desde ",s.desde]})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h3",{className:"font-bold text-sm uppercase tracking-wider text-gray-400 mb-2",children:"Observa\xe7\xf5es"}),(0,t.jsx)("p",{className:"mt-1 text-gray-700 bg-gray-50 p-4 rounded-2xl shadow-sm border border-gray-100",children:"Cliente prefere atendimento \xe0 tarde. Sens\xedvel a certos produtos."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-sm uppercase tracking-wider text-gray-400 mb-4",children:"Hist\xf3rico de Servi\xe7os"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-2xl flex justify-between items-center shadow-sm border border-gray-100 hover:shadow-md transition-all cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(C.Z,{size:16,className:"text-[#b5820e]"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:"Manicure"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,t.jsx)(y.Z,{size:14})," 12/04/2024"]})]}),null===(a=s.historico)||void 0===a?void 0:a.map((e,a)=>(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-2xl flex justify-between items-center shadow-sm border border-gray-100 hover:shadow-md transition-all cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(C.Z,{size:16,className:"text-[#b5820e]"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:e.servico})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,t.jsx)(y.Z,{size:14})," ",e.data]})]},a))]})]})]})}function ef(e){let{clientes:a,onVoltar:s,onAtivar:o,onDesativar:l}=e,[i,n]=(0,r.useState)(""),[c,d]=(0,r.useState)(null);console.log("Dados dos clientes:",a);let x=a.filter(e=>{let a=i.toLowerCase();return e.nome.toLowerCase().includes(a)||e.apelido.toLowerCase().includes(a)||e.email.toLowerCase().includes(a)});return c?(0,t.jsx)(eb,{cliente:c,onVoltar:()=>d(null)}):(0,t.jsxs)("div",{className:"rounded-[2.5rem] overflow-hidden animate-in fade-in zoom-in duration-300",children:[(0,t.jsxs)("div",{className:" p-8 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:s,className:"p-2 rounded-full text-[#b5820e] hover:bg-[#b5820e]  hover:text-black transition",children:(0,t.jsx)(_.Z,{size:22})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-black text-black uppercase tracking-tight",children:"Base de Clientes"}),(0,t.jsx)("p",{className:"text-gray-500 text-[10px] mt-2 uppercase tracking-[0.3em]",children:"Gest\xe3o de Utilizadores"})]})]}),(0,t.jsxs)("div",{className:"relative hidden md:block",children:[(0,t.jsx)(ee.Z,{className:"absolute left-4 top-3 text-gray-500",size:18}),(0,t.jsx)("input",{type:"text",placeholder:"Pesquisar cliente...",className:"bg-gray-900 text-white rounded-xl py-3 pl-12 pr-4 border border-gray-800 focus:border-[#b5820e] outline-none text-sm w-64 transition",value:i,onChange:e=>n(e.target.value)})]})]}),(0,t.jsx)("div",{className:"p-8",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(e=>(0,t.jsxs)("div",{onClick:()=>d(e),className:"p-6 rounded-[2rem] border cursor-pointer transition-all ".concat(e.ativo?"bg-gray-50 border-transparent hover:border-[#b5820e]":"bg-red-50/40 border-red-100 opacity-80"),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center font-black text-lg ".concat(e.ativo?"bg-[#b5820e] text-white":"bg-gray-200 text-gray-400"),children:e.nome[0]}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ".concat(e.ativo?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:e.ativo?"Ativo":"Desativado"})]}),(0,t.jsxs)("h3",{className:"text-lg font-bold text-black",children:[e.nome," ",e.apelido]}),(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,t.jsx)(M.Z,{size:14}),e.email]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,t.jsx)(T.Z,{size:14}),e.telefone]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 uppercase font-bold pt-2",children:[(0,t.jsx)(y.Z,{size:12}),"Desde"," ",e.desde?new Date(e.desde).toLocaleDateString("pt-PT"):"Data indispon\xedvel"]})]}),(0,t.jsx)("button",{onClick:a=>{a.stopPropagation(),e.ativo?l(e.id):o(e.id)},className:"w-full mt-6 py-3 rounded-xl font-black uppercase text-[10px] tracking-widest flex items-center justify-center gap-2 transition ".concat(e.ativo?"bg-white border border-red-100 text-red-500 hover:bg-red-50":"bg-[#b5820e] text-white hover:opacity-90"),children:e.ativo?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eh.Z,{size:14})," Desativar Cliente"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg.Z,{size:14})," Reativar Cliente"]})})]},e.id))})})]})}function ev(e){let{agendamentos:a,onVoltar:s}=e,r={};a.forEach(e=>{r[e.servico]=(r[e.servico]||0)+1});let o=a.length,l=Object.entries(r).map(e=>{let[a,s]=e;return{nome:a,total:s,percentagem:o>0?Math.round(s/o*100):0}}).sort((e,a)=>a.total-e.total);return(0,t.jsxs)("div",{className:"rounded-[2.5rem] overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsx)("div",{className:"p-6 sm:p-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 relative overflow-hidden",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 w-full sm:w-auto z-10",children:[(0,t.jsx)("button",{onClick:s,className:"p-3 bg-white/10 rounded-full text-[#b5820e] hover:bg-[#b5820e] hover:text-black transition-all ",children:(0,t.jsx)(_.Z,{size:24})}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h2",{className:"text-2xl sm:text-3xl font-serif font-black text-black uppercase tracking-tighter",children:["Ranking de ",(0,t.jsx)("span",{className:"text-[#b5820e]",children:"Servi\xe7os"})]}),(0,t.jsxs)("p",{className:"text-gray-500 text-xs sm:text-sm uppercase tracking-widest mt-1",children:["An\xe1lise baseada em"," ",(0,t.jsx)("span",{className:"font-black text-black",children:o})," ","agendamentos reais"]})]})]})}),(0,t.jsxs)("div",{className:"p-6 sm:p-10 space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,t.jsx)(eo.Z,{className:"text-[#b5820e]",size:20}),(0,t.jsx)("span",{className:"text-xs sm:text-sm font-black uppercase tracking-[0.2em] text-gray-400",children:"Desempenho de Vendas"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6",children:0===l.length?(0,t.jsx)("p",{className:"text-center py-20 text-gray-400 italic",children:"Sem dados de agendamentos para analisar."}):l.map((e,a)=>(0,t.jsxs)("div",{className:"group relative bg-gray-50 rounded-3xl p-4 sm:p-6 shadow-sm hover:shadow-lg transition-all border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-end mb-4 sm:mb-6 gap-2 sm:gap-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"text-3xl sm:text-4xl font-serif italic text-[#b5820e]",children:["0",a+1]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.Z,{size:16,className:"text-[#b5820e]"}),(0,t.jsx)("h4",{className:"text-sm sm:text-base font-black text-black uppercase tracking-tight",children:e.nome})]})})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"text-lg sm:text-xl font-black text-black",children:e.total}),(0,t.jsx)("span",{className:"text-[10px] sm:text-[11px] text-gray-400 font-bold uppercase ml-1",children:"Vendas"})]})]}),(0,t.jsxs)("div",{className:"w-full h-4 sm:h-5 bg-gray-100 rounded-full overflow-hidden shadow-inner border border-gray-200 relative",children:[(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-black to-[#b5820e] rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(e.percentagem,"%")}}),(0,t.jsx)("div",{className:"absolute right-4 top-0 h-full flex items-center",children:(0,t.jsxs)("span",{className:"text-[10px] font-black text-gray-500",children:[e.percentagem,"%"]})})]})]},a))})]})]})}var ej=s(2108),eN=s(8411),ey=s(5656),ew=s(8154);function ek(e){let{promocoes:a,servicosReais:s,onVoltar:o,onAtualizar:l}=e,[i,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[x,m]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[h,g]=(0,r.useState)(10),[b,f]=(0,r.useState)([]);function v(e){if(e){d(e),m(e.titulo||e.nome||""),g(e.valor||10);let a=e.validade||e.data_fim||"";p(a?a.split("T")[0]:"");let s=e.servicos_ids||e.servico_ids||e.servicos||[];f(Array.isArray(s)?s:[])}else d(null),m(""),p(""),g(10),f([]);n(!0)}async function N(){if(!x||!u||0===b.length){alert("Por favor, preencha o t\xedtulo, validade e escolha pelo menos um servi\xe7o.");return}try{let e={titulo:x,validade:u,servicos_ids:b,ativo:!c||c.ativo,tipo:"percentual",valor:Number(h),descricao:""};c?(await j.atualizar(c.id,e),alert("Promo\xe7\xe3o atualizada!")):(await j.criar(e),alert("Campanha lan\xe7ada com sucesso!")),n(!1),l()}catch(e){console.error("Erro ao salvar promo\xe7\xe3o:",e),alert("Erro ao salvar. Verifique se todos os campos est\xe3o corretos.")}}async function w(e){if(window.confirm("Deseja apagar esta campanha permanentemente?"))try{await j.remover(e),alert("Campanha removida."),l()}catch(e){console.error("Erro ao remover:",e),alert("Erro ao remover promo\xe7\xe3o.")}}return(0,t.jsxs)("div",{className:"bg-gray-50 min-h-screen rounded-[2.5rem] overflow-hidden animate-in fade-in duration-500",children:[(0,t.jsxs)("div",{className:"p-6 sm:p-10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 bg-white border-b border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 sm:gap-6",children:[(0,t.jsx)("button",{onClick:o,className:"p-3 bg-gray-100 rounded-full text-black hover:bg-[#b5820e] hover:text-white transition-all shadow-sm",children:(0,t.jsx)(_.Z,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl sm:text-3xl font-serif font-black text-black uppercase tracking-tighter",children:"Ofertas de Luxo"}),(0,t.jsx)("p",{className:"text-gray-400 text-[10px] uppercase tracking-[0.3em] mt-1",children:"Campanhas e Descontos Exclusivos"})]})]}),(0,t.jsxs)("button",{onClick:()=>v(),className:"bg-black text-[#b5820e] px-8 py-4 rounded-2xl font-black uppercase text-xs tracking-widest flex items-center gap-2 hover:scale-105 transition-all shadow-lg",children:[(0,t.jsx)(Z.Z,{size:18})," Lan\xe7ar Campanha"]})]}),(0,t.jsx)("div",{className:"p-6 sm:p-10",children:0===a.length?(0,t.jsxs)("div",{className:"text-center py-32 bg-white rounded-[3rem] border border-dashed border-gray-200",children:[(0,t.jsx)(ej.Z,{className:"mx-auto text-gray-200 mb-4",size:64}),(0,t.jsx)("p",{className:"text-gray-400 font-bold uppercase tracking-widest text-sm",children:"Nenhuma campanha ativa"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map(e=>(0,t.jsxs)("div",{className:"group rounded-[2.5rem] p-8 bg-white border border-transparent hover:border-[#b5820e] transition-all shadow-sm hover:shadow-2xl flex flex-col justify-between relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"absolute top-0 right-0 bg-[#b5820e] text-black font-black px-6 py-2 rounded-bl-3xl text-sm shadow-md",children:[parseFloat(e.valor||0).toFixed(0),"% OFF"]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between mb-8",children:[(0,t.jsx)("div",{className:"w-14 h-14 bg-black rounded-2xl flex items-center justify-center text-[#b5820e] shadow-xl",children:(0,t.jsx)(ej.Z,{size:24})}),(0,t.jsxs)("div",{className:"flex gap-2 mr-16",children:[(0,t.jsx)("button",{onClick:()=>v(e),className:"p-2.5 bg-gray-50 rounded-xl text-blue-600 hover:bg-blue-600 hover:text-white transition-all shadow-sm",children:(0,t.jsx)(P.Z,{size:16})}),(0,t.jsx)("button",{onClick:()=>w(e.id),className:"p-2.5 bg-gray-50 rounded-xl text-red-600 hover:bg-red-600 hover:text-white transition-all shadow-sm",children:(0,t.jsx)(L.Z,{size:16})})]})]}),(0,t.jsx)("h3",{className:"text-2xl font-black text-black mb-4 uppercase tracking-tight",children:e.titulo||e.nome}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(eN.Z,{size:14,className:"text-[#b5820e] fill-[#b5820e]"}),(0,t.jsx)("span",{className:"text-[10px] font-black uppercase text-gray-400 tracking-widest",children:"Servi\xe7os Inclu\xeddos:"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-8 min-h-[40px]",children:(()=>{let a=e.servicos_ids||e.servico_ids||[];return Array.isArray(a)&&0!==a.length?a.map(e=>{let a=s.find(a=>Number(a.id)===Number(e));return(0,t.jsxs)("span",{className:"px-3 py-1.5 bg-gray-50 border border-gray-100 rounded-xl text-[9px] font-bold text-gray-600 uppercase flex items-center gap-1.5",children:[(0,t.jsx)(ey.Z,{size:10,className:"text-[#b5820e]"})," ",(null==a?void 0:a.nome)||"Servi\xe7o #".concat(e)]},e)}):(0,t.jsx)("span",{className:"text-[10px] text-gray-400 italic",children:"Nenhum servi\xe7o selecionado"})})()})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,t.jsx)(y.Z,{size:16,className:"text-[#b5820e]"}),(0,t.jsxs)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:["Expira: ",new Date(e.validade||e.data_fim).toLocaleDateString("pt-PT")]})]}),(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest px-4 py-1.5 rounded-full ".concat(e.ativo?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:e.ativo?"Ativa":"Inativa"})]})]},e.id))})}),i&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-[3.5rem] w-full max-w-xl shadow-2xl overflow-hidden animate-in zoom-in duration-300 border border-white/20",children:[(0,t.jsxs)("div",{className:"bg-black p-8 flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-2xl font-serif font-black text-white uppercase tracking-tight",children:c?"Ajustar Campanha":"Nova Campanha"}),(0,t.jsx)("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-white transition-all p-2 bg-white/5 rounded-full",children:(0,t.jsx)(ew.Z,{size:24})})]}),(0,t.jsxs)("div",{className:"p-10 space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"block text-xs font-black uppercase text-gray-400 tracking-widest mb-3",children:"Nome da Promo\xe7\xe3o"}),(0,t.jsx)("input",{className:"w-full p-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-[#b5820e] focus:bg-white outline-none transition-all font-bold text-black",value:x,onChange:e=>m(e.target.value),placeholder:"Ex: Black Friday"})]}),(0,t.jsxs)("div",{className:"sm:col-span-1",children:[(0,t.jsx)("label",{className:"block text-xs font-black uppercase text-gray-400 tracking-widest mb-3",children:"Desconto %"}),(0,t.jsx)("input",{type:"number",className:"w-full p-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-[#b5820e] focus:bg-white outline-none transition-all font-bold text-black",value:h,onChange:e=>g(Number(e.target.value))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-black uppercase text-gray-400 tracking-widest mb-3",children:"Aplicar aos Servi\xe7os"}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-48 overflow-y-auto p-2 scrollbar-hide",children:s.map(e=>(0,t.jsxs)("button",{onClick:()=>{var a;return a=e.id,void(b.includes(a)?f(b.filter(e=>e!==a)):f([...b,a]))},className:"flex items-center justify-between p-4 rounded-2xl text-xs font-black uppercase tracking-tighter transition-all ".concat(b.includes(e.id)?"bg-black text-[#b5820e] shadow-lg scale-[0.98]":"bg-gray-50 text-gray-400 hover:bg-gray-100"),children:[(0,t.jsx)("span",{className:"truncate mr-2",children:e.nome}),b.includes(e.id)?(0,t.jsx)(F.Z,{size:16,strokeWidth:3}):(0,t.jsx)(Z.Z,{size:16})]},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-black uppercase text-gray-400 tracking-widest mb-3",children:"Data de Expira\xe7\xe3o"}),(0,t.jsx)("input",{type:"date",className:"w-full p-4 rounded-2xl bg-gray-50 border-2 border-transparent focus:border-[#b5820e] focus:bg-white outline-none transition-all font-bold text-black",value:u,onChange:e=>p(e.target.value)})]}),(0,t.jsx)("button",{onClick:N,className:"w-full py-5 bg-black text-[#b5820e] rounded-2xl font-black uppercase text-sm tracking-[0.3em] hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl shadow-black/20",children:c?"Salvar Altera\xe7\xf5es":"Lan\xe7ar Campanha de Luxo"})]})]})})]})}var eC=s(178),eS=s.n(eC),ez=s(9387),eZ=s.n(ez);ec().extend(eS()),ec().extend(eZ());let eA="Atlantic/Cape_Verde";function eE(){var e;let[a,s]=(0,r.useState)([]),[o,P]=(0,r.useState)([]),[L,O]=(0,r.useState)([]),[M,T]=(0,r.useState)(!0),q=e=>{if(!e)return"Data n\xe3o definida";let a=new Date(e);return isNaN(a.getTime())?"Data inv\xe1lida":a.toLocaleDateString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric"})},F=(0,r.useMemo)(()=>ec()().tz(eA).format("YYYY-MM-DD"),[]),Y=async()=>{try{T(!0);let e=await b(),a=(Array.isArray(e)?e:(null==e?void 0:e.data)||[]).map(e=>{if(!e.data_hora_inicio)return null;let a=ec().utc(e.data_hora_inicio).tz(eA).subtract(1,"hour");return{id:e.id,cliente:e.cliente_nome||e.nome_cliente||"Sem nome",servico:e.nome_servico||"",profissional:e.profissional_nome||"",dataIso:a.format("YYYY-MM-DD"),data:a.toDate(),hora:a.format("HH:mm"),timestamp:a.valueOf(),telefone:e.cliente_telefone||e.telefone_cliente||"",status:(e.status||"pendente").toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}}).filter(Boolean).sort((e,a)=>e.timestamp-a.timestamp);s(a)}catch(e){console.error("Erro ao carregar agendamentos:",e)}finally{T(!1)}},B=(0,r.useMemo)(()=>a.filter(e=>e.dataIso===F),[a,F]);(0,r.useEffect)(()=>{Y(),J(),et(),ei()},[]);let U=async e=>{if(window.confirm("Deseja realmente cancelar este agendamento?"))try{await f(e),alert("Cancelado com sucesso!"),Y()}catch(e){alert("Erro ao cancelar agendamento.")}},H=async e=>{let a=prompt("Nova Data (AAAA-MM-DD):"),s=prompt("Nova Hora (HH:MM):");if(a&&s)try{await v(e,{data:a,hora:s}),alert("Reagendado com sucesso!"),Y()}catch(e){alert("Erro ao reagendar.")}},[G,$]=(0,r.useState)("home"),[K,W]=(0,r.useState)([]),J=async()=>{try{let e=await p(),a=(Array.isArray(e)?e:(null==e?void 0:e.data)||[]).map(e=>{var a,s,t,r,o;return{id:e.id,nome:(null===(a=e.usuario)||void 0===a?void 0:a.nome)||e.nome||"Sem nome",apelido:(null===(s=e.usuario)||void 0===s?void 0:s.apelido)||e.apelido||"",email:(null===(t=e.usuario)||void 0===t?void 0:t.email)||e.email||"",telefone:(null===(r=e.usuario)||void 0===r?void 0:r.numero_telefone)||e.telefone||"",ativo:(null===(o=e.usuario)||void 0===o?void 0:o.ativo)!==!1&&!1!==e.ativo,desde:e.criado_em||new Date().toISOString().split("T")[0]}});W(a),console.log("[DEBUG] Clientes formatados:",a)}catch(e){console.error("Erro ao buscar clientes:",e),W([])}},Q=async(e,a)=>{try{"Ativo"===a?(await h(e),alert("Cliente desativado.")):(await g(e),alert("Cliente ativado.")),J()}catch(e){alert("Erro ao alterar status do cliente.")}},[ee,es]=(0,r.useState)([]),et=async()=>{try{let e=await d(),a=(Array.isArray(e)?e:(null==e?void 0:e.data)||[]).map(e=>{var a,s,t,r;return{id:e.id,nome:(null===(a=e.usuario)||void 0===a?void 0:a.nome)||e.nome||"Sem nome",especialidade:e.funcao_especialidade||e.especialidade||"",email:(null===(s=e.usuario)||void 0===s?void 0:s.email)||e.email||"",telefone:(null===(t=e.usuario)||void 0===t?void 0:t.numero_telefone)||e.telefone||"",nascimento:(null===(r=e.usuario)||void 0===r?void 0:r.data_nascimento)||e.nascimento||"",status:!1!==e.ativo?"Ativo":"Inativo"}});es(a),console.log("[DEBUG] Funcion\xe1rios formatados:",a)}catch(e){console.error("Erro ao carregar funcion\xe1rios:",e),es([])}},er=async e=>{if(window.confirm("Tem certeza que deseja apagar este funcion\xe1rio permanentemente?"))try{await u(e),alert("Funcion\xe1rio removido com sucesso!"),et()}catch(e){alert("Erro ao remover: este profissional pode ter agendamentos registrados.")}},[eo,el]=(0,r.useState)(void 0),ei=async()=>{try{let e=await l(),a=(Array.isArray(e)?e:(null==e?void 0:e.data)||[]).map(e=>({id:e.id,nome:e.nome_servico||e.nome||"",duracao:e.duracao_minutos||e.duracao||0,preco:e.preco||0,ativo:!1!==e.ativo}));P(a),console.log("[DEBUG] Servi\xe7os formatados:",a)}catch(e){console.error("Erro ao carregar servi\xe7os:",e),P([])}},en=async e=>{try{eo?(await n(eo.id,e),alert("Servi\xe7o atualizado com sucesso!")):(await i(e),alert("Servi\xe7o criado com sucesso!")),ew(!1),el(void 0),ei()}catch(e){console.error(e),alert("Erro ao salvar o servi\xe7o.")}},ed=async e=>{if(window.confirm("ATEN\xc7\xc3O: Este servi\xe7o ser\xe1 apagado PERMANENTEMENTE do sistema. Esta a\xe7\xe3o n\xe3o pode ser desfeita. Deseja continuar?"))try{await c(e),alert("Servi\xe7o apagado com sucesso!"),ei()}catch(e){var a,s;alert((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.erro)||"Erro ao remover servi\xe7o.")}},[ex,eh]=(0,r.useState)([]),eg=async()=>{try{let e=await j.listar(),a=(Array.isArray(e)?e:(null==e?void 0:e.data)||[]).map(e=>({...e,titulo:e.titulo||e.nome||"Promo\xe7\xe3o Sem Nome",validade:e.validade||e.data_fim||e.data_validade}));eh(a),console.log("[DEBUG] Promo\xe7\xf5es carregadas no Admin:",a)}catch(e){console.error("Erro ao carregar promo\xe7\xf5es:",e)}},eb=async e=>{try{await j.atualizar(e,{ativo:!0}),alert("Promo\xe7\xe3o ativada com sucesso!"),eg()}catch(e){console.error(e),alert("Erro ao ativar promo\xe7\xe3o.")}},ej=async e=>{try{await j.atualizar(e,{ativo:!1}),alert("Promo\xe7\xe3o desativada."),eg()}catch(e){console.error(e),alert("Erro ao desativar promo\xe7\xe3o.")}};(0,r.useEffect)(()=>{eg()},[G]);let eN=async()=>{try{let e=await N.listar();O(e)}catch(e){console.error("Erro ao carregar auditoria",e),alert("Erro ao carregar logs de auditoria")}};(0,r.useEffect)(()=>{eN()},[G]);let[ey,ew]=(0,r.useState)(!1),[eC,eS]=(0,r.useState)(null);a.map(e=>e.cliente);let ez={};a.forEach(e=>{ez[e.servico]=(ez[e.servico]||0)+1});let eZ=(null===(e=Object.entries(ez).sort((e,a)=>a[1]-e[1])[0])||void 0===e?void 0:e[0])||"—",eE=(0,r.useMemo)(()=>a.filter(e=>ec()(e.dataISO).format("YYYY-MM-DD")===F&&"concluido"===e.status).reduce((e,a)=>{let s=o.find(e=>e.nome===a.servico);return e+(s?Number(s.preco):0)},0),[a,o,F]),e_=ee.length;return(0,t.jsxs)("div",{className:"min-h-screen bg-white sm:p-8 md:px-20 md:py-10",children:["home"===G&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("header",{className:"mb-6 sm:mb-10 flex flex-col sm:flex-row justify-between items-start sm:items-end gap-4 sm:gap-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-black",children:["Bem vinda, Administradora!"," "]}),(0,t.jsx)("p",{className:"text-gray-500 mt-2 text-sm sm:text-lg font-medium italic",children:'"Transformando vis\xe3o em excel\xeancia: o sucesso da Maddie Beuty Boutique come\xe7a na sua lideran\xe7a"'})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[#b5820e] px-4 py-2 rounded-xl shadow-lg border-b-2 border-[#b5820e] text-xs sm:text-sm font-bold",children:[(0,t.jsx)(y.Z,{size:16,className:"sm:mr-1"}),(0,t.jsx)("span",{children:new Date().toLocaleDateString("pt-PT",{day:"2-digit",month:"long",year:"numeric"})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 sm:gap-4 mb-20 md:mb-25",children:[(0,t.jsx)(eR,{onClick:()=>$("hoje"),title:"Agendamentos so de Hoje",value:B.length,icon:(0,t.jsx)(w.Z,{className:"text-purple-500"}),color:"bg-purple-50"}),(0,t.jsx)(eR,{onClick:()=>$("todos-agendamentos"),title:"Todos os Agendamentos",value:a.length,icon:(0,t.jsx)(y.Z,{className:"text-purple-500"}),color:"bg-purple-50"}),(0,t.jsx)(eR,{onClick:()=>$("clientes"),title:"Clientes Ativos",value:K.filter(e=>e.ativo).length,icon:(0,t.jsx)(k.Z,{className:"text-blue-500"}),color:"bg-blue-50"}),(0,t.jsx)(eR,{onClick:()=>$("equipa"),title:"Funcion\xe1rios",value:e_,icon:(0,t.jsx)(C.Z,{className:"text-pink-600"}),color:"bg-pink-50"}),(0,t.jsx)(eR,{onClick:()=>$("financeiro"),title:"Faturamento Di\xe1rio",value:"".concat(eE.toLocaleString()," CVE"),icon:(0,t.jsx)(S.Z,{className:"text-[#b5820e]"}),color:"bg-amber-50"}),(0,t.jsx)(eR,{onClick:()=>$("popularidade_servicos"),title:"Servi\xe7o Mais Procurado",value:eZ,icon:(0,t.jsx)(z.Z,{className:"text-green-500"}),color:"bg-green-100"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 max-w-full gap-4 sm:gap-6 mb-10 sm:mb-8",children:[(0,t.jsxs)("div",{className:" rounded-3xl  border border-gray-300 p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-black",children:"Agendamentos Recentes"}),(0,t.jsx)("button",{onClick:()=>$("todos-agendamentos"),className:"text-[9px] sm:text-xs font-bold text-[#b5820e] uppercase tracking-widest hover:underline",children:"Ver Tudo →"})]}),(0,t.jsx)("div",{className:"space-y-4",children:M?(0,t.jsx)("p",{className:"text-gray-400 italic text-center py-10",children:"Sincronizando fuso hor\xe1rio..."}):B.length>0?B.slice(0,5).map(e=>(0,t.jsx)(eu.u,{...e,dataIso:e.dataIso,servico:"".concat(e.servico," • ").concat(e.profissional),clickable:!0,onItemClick:()=>$("todos-agendamentos"),onCancelar:()=>U(e.id),onRemarcar:()=>H(e.id)},e.id)):(0,t.jsxs)("div",{className:"p-10 border-2 border-dashed rounded-3xl text-center text-gray-400 italic",children:["Nenhum agendamento para hoje (",ec()().tz(eA).format("DD/MM/YYYY"),")."]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-200 p-4 sm:p-6 text-center mt-10",children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-black mb-4 sm:mb-6 text-left",children:"Servi\xe7os Dispon\xedveis"}),(0,t.jsxs)("div",{className:"max-h-[300px] overflow-y-auto pr-2",children:[" ",o.map(e=>(0,t.jsx)(eD,{name:e.nome,count:"".concat(e.preco," esc"),onEdit:()=>{el(e),ew(!0)},onDelete:()=>ed(e.id)},e.id))]}),(0,t.jsxs)("button",{onClick:()=>{el(void 0),ew(!0)},className:"w-full mt-4 sm:mt-6 py-2 sm:py-3 border-2 border-dashed border-[#b5820e] text-[#b5820e] rounded-2xl font-bold flex items-center justify-center gap-1 sm:gap-2 hover:bg-amber-50 transition",children:[(0,t.jsx)(Z.Z,{size:16})," Novo Servi\xe7o"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10 sm:gap-6",children:[(0,t.jsxs)("div",{className:"bg-[#0a0a0a] text-white rounded-[2rem] shadow-2xl border border-gray-800 p-6 flex flex-col justify-between group hover:border-[#b5820e]/50 transition-all duration-500",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-serif font-black uppercase tracking-tighter text-white",children:"Vendas & Lucro"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-1",children:[(0,t.jsx)("span",{className:"h-1.5 w-1.5 bg-green-500 rounded-full animate-pulse"}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest",children:"Live: Atualiza\xe7\xe3o em tempo real"})]})]}),(0,t.jsx)("div",{className:"p-3 bg-gray-900 rounded-2xl group-hover:bg-[#b5820e] transition-colors duration-500",children:(0,t.jsx)(z.Z,{className:"text-[#b5820e] group-hover:text-black",size:20})})]}),(0,t.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Faturamento Hoje"}),(0,t.jsxs)("p",{className:"text-2xl font-black text-white",children:[eE.toLocaleString(),(0,t.jsx)("span",{className:"text-xs font-normal text-[#b5820e] ml-1",children:"CVE"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest mb-1",children:"Margem"}),(0,t.jsx)("p",{className:"text-sm font-bold text-green-500",children:"+12.5%"})]})]}),(0,t.jsx)("div",{className:"h-1.5 w-full bg-gray-900 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-[#b5820e] rounded-full w-[65%] shadow-[0_0_10px_#b5820e]"})})]}),(0,t.jsxs)("button",{onClick:()=>$("financeiro"),className:"group/btn w-full py-4 bg-gray-900 hover:bg-[#b5820e] text-white hover:text-black rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] flex items-center justify-center gap-3 transition-all duration-300 border border-gray-800 hover:border-[#b5820e]",children:[(0,t.jsx)(A.Z,{size:16,className:"text-[#b5820e] group-hover/btn:text-black"}),"An\xe1lise Detalhada",(0,t.jsx)(E.Z,{size:14,className:"opacity-0 group-hover/btn:opacity-100 transition-all translate-x-[-10px] group-hover/btn:translate-x-0"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 text-white rounded-3xl shadow-sm border border-gray-700 p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold",children:"Corpo T\xe9cnico"}),(0,t.jsx)(R.Z,{className:"text-gray-400",size:18})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:gap-3",children:[0===ee.length?(0,t.jsx)("p",{className:"text-gray-500 text-xs italic",children:"Nenhum profissional registado."}):ee.slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 sm:p-3 border-l-4 border-[#b5820e] bg-gray-900 rounded-r-xl",children:[(0,t.jsx)("span",{className:"text-[10px] sm:text-sm font-bold",children:e.nome}),(0,t.jsx)("span",{className:"text-[8px] sm:text-[10px] px-2 py-1 rounded-md font-bold uppercase ".concat("Ativo"===e.status?"text-green-400 bg-green-900":"text-red-400 bg-red-900"),children:e.status})]},e.id)),(0,t.jsxs)("button",{onClick:()=>$("equipa"),className:"w-full mt-2 py-2 sm:py-3 bg-[#b5820e] text-black rounded-2xl font-bold text-xs sm:text-sm hover:opacity-90 transition",children:["Gerir Profissionais (",ee.length,")"]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 rounded-3xl p-4 sm:p-6 shadow-xl text-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 sm:mb-6",children:[(0,t.jsx)(D.Z,{className:"text-[#b5820e]",size:18}),(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold",children:"Logs Sistema"})]}),(0,t.jsx)("div",{className:"space-y-2 sm:space-y-4 font-mono text-[8px] sm:text-[10px] text-gray-400",children:0===L.length?(0,t.jsx)("p",{className:"italic",children:"Nenhuma atividade registada."}):L.slice(0,3).map((e,a)=>{var s;return(0,t.jsxs)("p",{children:[(0,t.jsxs)("span",{className:"text-[#b5820e]",children:["[",new Date(e.data_hora).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"]"]})," ",null===(s=e.usuario_nome)||void 0===s?void 0:s.toUpperCase(),": ",e.acao]},a)})}),(0,t.jsxs)("button",{onClick:()=>$("logs"),className:"w-full mt-4 sm:mt-6 py-1 sm:py-2 text-[#b5820e] border border-[#b5820e] rounded-xl text-[9px] sm:text-xs font-bold hover:bg-[#b5820e] hover:text-black transition",children:["Ver Auditoria Completa (",L.length,")"]})]}),(0,t.jsxs)("div",{className:"bg-gray-800 text-white rounded-[2rem] shadow-xl border border-gray-700 p-6 flex flex-col justify-between group hover:border-[#b5820e]/30 transition-all duration-500",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-serif font-black uppercase tracking-tighter text-[#b5820e]",children:"Campanhas & Promo\xe7\xf5es"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-1",children:[(0,t.jsx)("span",{className:"h-1.5 w-1.5 bg-[#b5820e] rounded-full animate-pulse"}),(0,t.jsxs)("p",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest",children:[ex.length," campanhas no total"]})]})]}),(0,t.jsx)("div",{className:"p-3 bg-gray-900 rounded-2xl",children:(0,t.jsx)(z.Z,{className:"text-[#b5820e]",size:20})})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===ex.length?(0,t.jsx)("div",{className:"py-8 text-center border-2 border-dashed border-gray-700 rounded-2xl",children:(0,t.jsx)("p",{className:"text-gray-500 text-xs italic",children:"Nenhuma promo\xe7\xe3o registada."})}):ex.slice(0,2).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-900/50 rounded-2xl border border-gray-700/50 hover:border-[#b5820e]/50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"text-sm font-black text-white uppercase tracking-tight",children:e.titulo}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(y.Z,{size:12,className:"text-[#b5820e]"}),(0,t.jsxs)("p",{className:"text-[10px] font-bold text-gray-500 uppercase",children:["At\xe9 ",q(e.validade)]})]})]}),(0,t.jsx)("span",{className:"text-[8px] font-black px-3 py-1.5 rounded-full uppercase tracking-widest ".concat(e.ativo?"text-green-400 bg-green-900/30 border border-green-900":"text-red-500 bg-red-900/30 border border-red-900"),children:e.ativo?"Ativa":"Inativa"})]},e.id))}),(0,t.jsxs)("button",{onClick:()=>$("promocoes"),className:"w-full mt-6 py-4 bg-[#b5820e] text-black rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] flex items-center justify-center gap-2 hover:bg-white transition-all duration-300 shadow-lg shadow-[#b5820e]/10",children:[(0,t.jsx)(Z.Z,{size:16}),"Gerir Ofertas de Luxo"]})]})]})]}),"hoje"===G&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("button",{onClick:()=>{$("home")},className:"p-3 bg-white/10 rounded-full text-[#b5820e] hover:bg-[#b5820e] hover:text-black transition-all",children:(0,t.jsx)(_.Z,{size:24})}),M?(0,t.jsx)("p",{className:"text-gray-400 italic text-center py-10",children:"Sincronizando fuso hor\xe1rio..."}):B.length>0?B.slice(0,5).map(e=>(0,t.jsx)(eu.u,{...e,dataIso:e.dataIso,servico:"".concat(e.servico," • ").concat(e.profissional),clickable:!0,onItemClick:()=>$("todos-agendamentos"),onCancelar:()=>U(e.id),onRemarcar:()=>H(e.id)},e.id)):(0,t.jsxs)("div",{className:"p-10 border-2 border-dashed rounded-3xl text-center text-gray-400 italic",children:["Nenhum agendamento para hoje (",ec()().tz(eA).format("DD/MM/YYYY"),")."]})]}),"promocoes"===G&&(0,t.jsx)(ek,{promocoes:ex,servicosReais:o,onVoltar:()=>$("home"),onAtivar:eb,onDesativar:ej,onAtualizar:eg}),"popularidade_servicos"===G&&(0,t.jsx)(ev,{agendamentos:a,onVoltar:()=>$("home")}),"clientes"===G&&(0,t.jsx)(ef,{clientes:K,onVoltar:()=>$("home"),onAtivar:e=>{K.find(a=>a.id===e)&&Q(e,"Inativo")},onDesativar:e=>{K.find(a=>a.id===e)&&Q(e,"Ativo")}}),"todos-agendamentos"===G&&(0,t.jsx)(ep,{agendamentos:a,onVoltar:()=>$("home"),onCancelar:U,onReagendar:H}),"financeiro"===G&&(0,t.jsx)(em,{agendamentos:a,servicos:o,onVoltar:()=>$("home")}),"logs"===G&&(0,t.jsx)(ea,{logs:L,onVoltar:()=>$("home")}),"equipa"===G&&(0,t.jsx)(V,{funcionarios:ee,onVoltar:()=>$("home"),onNovoFuncionario:()=>{eS(null),$("novo-funcionario")},onEditarFuncionario:e=>{eS(e),$("novo-funcionario")},onRemover:er}),"novo-funcionario"===G&&(0,t.jsx)(X,{funcionarioParaEditar:eC,onVoltar:()=>$("equipa"),onSalvar:async e=>{try{eC?(await m(eC.id,e),alert("Funcion\xe1rio atualizado!")):(await x(e),alert("Funcion\xe1rio criado com sucesso!")),et(),$("equipa")}catch(e){alert("Erro ao salvar funcion\xe1rio. Verifique os dados.")}}}),ey&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>{ew(!1),el(void 0)},children:(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),className:"bg-white p-6 rounded-3xl w-full max-w-md",children:(0,t.jsx)(I,{onVoltar:()=>{ew(!1),el(void 0)},onSubmit:en,servicoParaEditar:eo})})})]})}function eR(e){let{title:a,value:s,icon:r,color:o,onClick:l}=e;return(0,t.jsxs)("div",{onClick:l,className:"bg-white p-4 sm:p-6 rounded-3xl shadow-sm border border-gray-300 transition-all duration-300 \n        ".concat(l?"cursor-pointer hover:shadow-lg hover:-translate-y-1 active:scale-95":"cursor-default"),children:[(0,t.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 ".concat(o," rounded-2xl flex items-center justify-center mb-3 sm:mb-4 shadow-inner"),children:r}),(0,t.jsx)("p",{className:"text-[12px] sm:text-sm text-gray-400 font-medium uppercase tracking-wider mb-3",children:a}),(0,t.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-gray-800 mt-1",children:s}),l&&(0,t.jsx)("p",{className:"text-[9px] sm:text-[9px] text-[#b5820e] font-bold mt-1 uppercase tracking-tighter opacity-0 hover:opacity-100 transition-opacity",children:"Clique para gerir →"})]})}function eD(e){let{name:a,count:s,onEdit:r,onDelete:o}=e;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 sm:p-4 bg-gray-50 rounded-2xl transition hover:bg-white hover:shadow-md mb-2 group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,t.jsx)(C.Z,{size:14,className:"text-[#b5820e]"}),(0,t.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:a}),(0,t.jsxs)("span",{className:"text-xs sm:text-sm font-bold text-gray-500 ml-2",children:["- ",s]})]}),(0,t.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:r,className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Editar",children:(0,t.jsx)(P.Z,{size:14})}),(0,t.jsx)("button",{onClick:o,className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Remover",children:(0,t.jsx)(L.Z,{size:14})})]})]})}},4279:function(e,a,s){"use strict";let t=s(7066).Z.create({baseURL:"http://localhost:3333",headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{var a;let s=localStorage.getItem("token");return console.log("[API] Token encontrado:",s?"✅ Sim":"❌ N\xe3o"),s&&s.trim()?"undefined"===s||"null"===s||""===s?(console.warn("[API] ⚠️ Token inv\xe1lido encontrado. Removendo do localStorage..."),localStorage.removeItem("token")):(e.headers.Authorization="Bearer ".concat(s),console.log("[API] ✅ Token adicionado ao header"),console.log("[API] Token preview:",s.substring(0,20)+"...")):console.warn("[API] ⚠️ Nenhum token encontrado no localStorage"),console.log("[API] ".concat(null===(a=e.method)||void 0===a?void 0:a.toUpperCase()," ").concat(e.baseURL).concat(e.url)),e}),t.interceptors.response.use(e=>e,e=>{if(e.response){var a,s;console.error("[API ERROR] Status: ".concat(e.response.status)),console.error("[API ERROR] URL: ".concat(null===(a=e.config)||void 0===a?void 0:a.url)),console.error("[API ERROR] Message: ".concat(e.message));try{console.error("[API ERROR] Response data:",e.response.data)}catch(e){console.error("[API ERROR] N\xe3o foi poss\xedvel logar response.data",e)}404===e.response.status&&(console.error("[API ERROR] Rota n\xe3o encontrada: ".concat(null===(s=e.config)||void 0===s?void 0:s.url)),console.error("[API ERROR] Verifique se a rota existe no backend")),401===e.response.status&&(console.error("[API ERROR] N\xe3o autorizado. Token inv\xe1lido ou expirado"),console.error("[API ERROR] Response data:",e.response.data),localStorage.removeItem("token"),window.location.href="/login")}else e.request?(console.error("[API ERROR] Nenhuma resposta do servidor"),console.error("[API ERROR] Request:",e.request)):console.error("[API ERROR] Erro ao configurar requisi\xe7\xe3o:",e.message);return Promise.reject(e)}),a.Z=t}},function(e){e.O(0,[432,706,888,774,179],function(){return e(e.s=8987)}),_N_E=e.O()}]);