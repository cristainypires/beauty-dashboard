"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{7218:function(e,a,t){t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7371:function(e,a,t){t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},7065:function(e,a,t){t.d(a,{u:function(){return i}});var s=t(5893);t(7294);var r=t(718),o=t(220),n=t(8527);function i(e){let{cliente:a,servico:t,profissional:i,data:l,hora:c,telefone:d,status:m,obs:x,clickable:p=!0,onItemClick:u,onClienteClick:g,onRemarcar:f,onCancelar:h}=e,b="confirmado"===m,y=a&&a.trim()?a:"Sem nome",v=d&&d.trim()?d:"Sem telefone",j=t&&t.trim()?t:"Sem servi\xe7o",N=m&&m.trim()?m:"Sem status";return(0,s.jsxs)("div",{className:"group flex flex-col md:flex-row items-start md:items-center justify-between p-2 sm:p-6 bg-gradient-to-br from-[#eed953]/20 via-white to-[#eed953]/20 rounded-2xl md:rounded-[2rem] border border-transparent hover:border-[#b5820e]/20 transition-all gap-4 shadow-sm w-full",children:[(0,s.jsxs)("div",{onClick:u,className:"flex flex-col md:flex-row items-start md:items-center gap-4 md:gap-6 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col-2 gap-5 md:flex-col items-center justify-center text-[#b5820e] flex-shrink-0",children:[(0,s.jsx)("span",{className:"text-[12px] sm:text-[12px] font-bold uppercase opacity-70",children:"Hora"}),(0,s.jsx)("span",{className:"text-xl sm:text-2xl font-extrabold",children:c}),(0,s.jsx)("span",{className:"text-[10px] sm:text-[12px] text-gray-800 mt-1",children:new Date(l).toLocaleDateString("pt-PT",{day:"2-digit",month:"short",year:"numeric"})})]}),(0,s.jsxs)("div",{className:"flex-1 p-3 sm:p-4 rounded-xl transition-all duration-300 ".concat(p?"cursor-pointer ":"cursor-default"),onClick:p?g:void 0,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-1",children:[(0,s.jsx)(r.Z,{size:20,className:"text-[#b5820e]"}),(0,s.jsx)("span",{className:"text-sm sm:text-lg font-bold text-black",children:y})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,s.jsxs)("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium",children:["\uD83D\uDCDE ",v]})}),(0,s.jsxs)("div",{className:"flex items-center gap-1 mb-1 flex-wrap",children:[(0,s.jsx)("span",{className:"text-[11px] sm:text-sm font-semibold text-gray-800",children:j}),i&&(0,s.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 italic ml-2",children:i})]}),x&&(0,s.jsx)("p",{className:"text-[10px] text-blue-500 mt-2 italic",children:x})]}),(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold px-2 sm:px-3 py-1 rounded-full ".concat(function(e){switch(e){case"confirmado":return"bg-green-100 text-green-700";case"pendente":return"bg-yellow-100 text-yellow-700";case"cancelado":return"bg-red-100 text-red-700";case"reagendado":return"bg-blue-100 text-blue-700";case"concluido":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}}(m)),children:N})]}),(0,s.jsxs)("div",{className:"flex gap-2 w-full md:w-auto justify-end mt-2 md:mt-0",children:[(0,s.jsxs)("button",{disabled:!b,onClick:b?f:void 0,className:"flex-1 md:flex-none px-3 sm:px-4 py-2 rounded-lg border font-bold text-[10px] uppercase flex items-center justify-center gap-1 sm:gap-2 transition-all\n            ".concat(b?"bg-white text-black hover:text-[#b5820e]":"bg-gray-100 text-gray-400 cursor-not-allowed","\n          "),children:[(0,s.jsx)(o.Z,{size:12})," Remarcar"]}),(0,s.jsx)("button",{disabled:!b,onClick:b?h:void 0,className:"p-2 sm:p-3 rounded-lg border transition-all\n            ".concat(b?"bg-white text-red-400 hover:text-red-600":"bg-gray-100 text-gray-300 cursor-not-allowed","\n          "),children:(0,s.jsx)(n.Z,{size:18})})]})]})}},8854:function(e,a,t){t.d(a,{Z:function(){return g}});var s=t(5893),r=t(7294),o=t(7218),n=t(718),i=t(7371),l=t(1462);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,l.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),d=(0,l.Z)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),m=(0,l.Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var x=t(9298),p=t(7484),u=t.n(p);function g(){let[e,a]=(0,r.useState)([]),[t,l]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),[f,h]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{x.w.obterPanoramaCompleto(t)},[]),(0,r.useEffect)(()=>{t&&(h(!0),x.w.obterPanoramaCompleto(t).then(g).finally(()=>h(!1)))},[t]),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-4 space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100 flex flex-col md:flex-row justify-between items-center gap-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("h1",{className:"text-3xl md:text-4xl font-extrabold uppercase tracking-tight text-gray-900",children:["Agenda ",(0,s.jsx)("span",{className:"text-[#b5820e]",children:"Geral"})," dos Profissionais \uD83D\uDCC5"]}),(0,s.jsxs)("p",{className:" text-gray-500 text-sm md:text-base mt-5 font-semibold uppercase tracking-wide flex items-center gap-1",children:[(0,s.jsx)(o.Z,{size:14,className:"text-[#b5820e]"})," Controle de Escalas e Aus\xeancias"]})]}),(0,s.jsxs)("select",{className:"w-full md:w-72 p-4 bg-gray-50 rounded-2xl font-bold border-2 border-transparent focus:border-[#b5820e] outline-none",value:t,onChange:e=>l(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Escolher Profissional..."}),(null==e?void 0:e.length)>0&&e.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),p?(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"p-8 rounded-[2.5rem] shadow-2xl transition-all duration-300 hover:scale-[1.02] ".concat(p.profissional.ativo?"bg-black text-white":"bg-red-600 text-white"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,s.jsx)("div",{className:"p-3 bg-white/10 rounded-2xl flex items-center justify-center",children:(0,s.jsx)(i.Z,{size:24})}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest bg-white/20 px-3 py-1 rounded-full",children:p.profissional.ativo?"Em Atividade ✅":"Em F\xe9rias / Ausente ✈️"})]}),(0,s.jsx)("h2",{className:"text-2xl md:text-3xl font-black uppercase leading-tight",children:p.profissional.nome}),(0,s.jsx)("p",{className:"text-white/70 text-xs mt-2 font-bold uppercase tracking-widest",children:"Status Atual do Sistema"})]}),(0,s.jsxs)("div",{className:"bg-amber-50 p-6 rounded-[2rem] border border-amber-100 flex gap-4 items-start",children:[(0,s.jsx)(c,{className:"text-[#b5820e] shrink-0 mt-1"}),(0,s.jsx)("p",{className:"text-xs text-amber-800 leading-relaxed font-medium",children:"Este panorama ajuda a rece\xe7\xe3o a decidir se pode realizar marca\xe7\xf5es manuais. Bloqueios em vermelho representam imprevistos registados."})]})]}),(0,s.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100",children:[(0,s.jsxs)("h3",{className:"text-sm font-black uppercase tracking-[0.2em] text-gray-400 mb-6 flex items-center gap-2",children:[(0,s.jsx)(o.Z,{size:16})," Escala Semanal Fixa"]}),(0,s.jsx)("div",{className:"space-y-3",children:["Domingo","Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado"].map((e,a)=>{let t=p.escala.find(e=>e.dia_semana===a);return(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-xl transition-colors duration-200 ".concat((null==t?void 0:t.disponivel)?"bg-gray-50/50 hover:bg-gray-100":"opacity-40 bg-gray-50"),children:[(0,s.jsx)("span",{className:"text-xs font-bold text-gray-600",children:e}),(null==t?void 0:t.disponivel)?(0,s.jsxs)("span",{className:"text-xs font-black text-gray-800",children:[t.hora_inicio.substring(0,5)," - ",t.hora_fim.substring(0,5)]}):(0,s.jsx)("span",{className:"text-[10px] font-black uppercase text-gray-400",children:"Folga \uD83D\uDCA4"})]},e)})})]}),(0,s.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100",children:[(0,s.jsxs)("h3",{className:"text-sm font-black uppercase tracking-[0.2em] text-gray-400 mb-6 flex items-center gap-2",children:[(0,s.jsx)(d,{size:16,className:"text-red-500"})," Bloqueios de Hor\xe1rio"]}),(0,s.jsx)("div",{className:"space-y-4",children:0===p.bloqueios.length?(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)(m,{size:32,className:"mx-auto text-green-400 mb-2"}),(0,s.jsx)("p",{className:"text-[10px] font-black uppercase text-gray-300",children:"Nenhum imprevisto registado"})]}):p.bloqueios.map((e,a)=>(0,s.jsxs)("div",{className:"group p-4 bg-red-50 rounded-2xl border border-red-100 hover:bg-red-100 transition-colors duration-300 cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,s.jsx)("span",{className:"text-[10px] font-black text-red-600 uppercase",children:"Bloqueado ⛔"}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-red-400",children:u()(e.data_hora_inicio).format("DD MMM")})]}),(0,s.jsx)("p",{className:"text-sm font-black text-red-900",children:e.motivo||"Imprevisto"}),(0,s.jsxs)("p",{className:"text-[10px] font-bold text-red-400 mt-1",children:[u()(e.data_hora_inicio).format("HH:mm")," \xe0s ",u()(e.data_hora_fim).format("HH:mm")]})]},a))})]})]}):(0,s.jsxs)("div",{className:"text-center py-24 bg-gray-50 rounded-[3rem] border-2 border-dashed border-gray-200",children:[(0,s.jsx)(n.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,s.jsx)("p",{className:"text-gray-400 font-bold uppercase text-xs tracking-widest",children:"Selecione um profissional para ver a disponibilidade total"})]})]})}},9298:function(e,a,t){t.d(a,{w:function(){return r}});var s=t(4279);let r={listarMinhaAgenda:async e=>(await s.Z.get("/funcionario/listar-agendamentos",{params:e?{data:e}:{}})).data,verMeuHistorico:async()=>(await s.Z.get("/funcionario/historico")).data,concluirServico:async e=>(await s.Z.patch("/funcionario/agendamentos/".concat(e,"/concluir"))).data,cancelarAgendamento:async e=>(await s.Z.patch("/funcionario/agendamentos/".concat(e,"/cancelar"))).data,reagendarAgendamento:async(e,a)=>(await s.Z.patch("/funcionario/agendamentos/".concat(e,"/reagendar"),a)).data,obterDisponibilidade:async e=>(await s.Z.get("/funcionario/adm/disponibilidade/".concat(e))).data,obterPanoramaCompleto:async e=>(await s.Z.get("/funcionario/panorama/".concat(e))).data,marcarDisponibilidade:async e=>(await s.Z.post("/funcionario/adm/disponibilidade",e)).data,marcarFerias:async e=>(await s.Z.post("/funcionario/ferias",e)).data,bloquearHorario:async e=>(await s.Z.post("/funcionario/bloquear-horario",e)).data,listarServicos:async()=>(await s.Z.get("/funcionario/servicos")).data,listarProfissionais:async()=>(await s.Z.get("/funcionario/profissionais")).data,listarClientes:async()=>(await s.Z.get("/funcionario/clientes")).data,fazerNovoAgendamento:async e=>(await s.Z.post("/funcionario/agendamentos",e)).data}},4279:function(e,a,t){let s=t(7066).Z.create({baseURL:"http://localhost:3333",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{var a;let t=localStorage.getItem("token");return console.log("[API] Token encontrado:",t?"✅ Sim":"❌ N\xe3o"),t&&t.trim()?"undefined"===t||"null"===t||""===t?(console.warn("[API] ⚠️ Token inv\xe1lido encontrado. Removendo do localStorage..."),localStorage.removeItem("token")):(e.headers.Authorization="Bearer ".concat(t),console.log("[API] ✅ Token adicionado ao header"),console.log("[API] Token preview:",t.substring(0,20)+"...")):console.warn("[API] ⚠️ Nenhum token encontrado no localStorage"),console.log("[API] ".concat(null===(a=e.method)||void 0===a?void 0:a.toUpperCase()," ").concat(e.baseURL).concat(e.url)),e}),s.interceptors.response.use(e=>e,e=>{if(e.response){var a,t;console.error("[API ERROR] Status: ".concat(e.response.status)),console.error("[API ERROR] URL: ".concat(null===(a=e.config)||void 0===a?void 0:a.url)),console.error("[API ERROR] Message: ".concat(e.message));try{console.error("[API ERROR] Response data:",e.response.data)}catch(e){console.error("[API ERROR] N\xe3o foi poss\xedvel logar response.data",e)}404===e.response.status&&(console.error("[API ERROR] Rota n\xe3o encontrada: ".concat(null===(t=e.config)||void 0===t?void 0:t.url)),console.error("[API ERROR] Verifique se a rota existe no backend")),401===e.response.status&&(console.error("[API ERROR] N\xe3o autorizado. Token inv\xe1lido ou expirado"),console.error("[API ERROR] Response data:",e.response.data),localStorage.removeItem("token"),window.location.href="/login")}else e.request?(console.error("[API ERROR] Nenhuma resposta do servidor"),console.error("[API ERROR] Request:",e.request)):console.error("[API ERROR] Erro ao configurar requisi\xe7\xe3o:",e.message);return Promise.reject(e)}),a.Z=s},5567:function(e,a,t){t.d(a,{if:function(){return s}});function s(e){return Array.isArray(e)?e:e&&Array.isArray(e.data)?e.data:[]}}}]);