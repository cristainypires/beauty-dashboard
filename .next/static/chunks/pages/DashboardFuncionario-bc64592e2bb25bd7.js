(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{1491:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DashboardFuncionario",function(){return t(9299)}])},7372:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6451:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},3980:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3460:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},8453:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5809:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4672:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},858:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},7963:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(1462).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9299:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return F}});var s=t(5893),r=t(7294),l=t(7553),n=t(8088),i=t(7969),o=t(7218),c=t(3980),d=t(6451),x=t(8453),m=t(9298),u=t(7484),p=t.n(u),g=t(178),b=t.n(g),h=t(9387),f=t.n(h),v=t(7065),j=t(4672),y=t(7963),N=t(3460),w=t(7371),k=t(1462);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,k.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var _=t(7372),S=t(5809);function D(){let[e,a]=(0,r.useState)([]),[t,l]=(0,r.useState)(""),[n,i]=(0,r.useState)(!1),[c,d]=(0,r.useState)("semanal"),[x,u]=(0,r.useState)(["Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado","Domingo"].map(e=>({dia:e,ativo:!0,entrada:"09:00",saida:"19:00"}))),[p,g]=(0,r.useState)({data:"",hora:"",motivo:""}),[b,h]=(0,r.useState)({data_inicio:"",data_fim:""});(0,r.useEffect)(()=>{m.w.listarProfissionais().then(a)},[]),(0,r.useEffect)(()=>{t&&f()},[t]);let f=async()=>{i(!0);try{let e=await m.w.obterDisponibilidade(t),a=["Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado","Domingo"],s=x.map(t=>{let s=e.find(e=>a[e.dia_semana]===t.dia);return s?{...t,ativo:s.disponivel,entrada:s.hora_inicio.substring(0,5),saida:s.hora_fim.substring(0,5)}:{...t,ativo:!1}});u(s)}catch(e){console.error("Erro ao carregar agenda")}finally{i(!1)}},v=async()=>{i(!0);try{await m.w.marcarDisponibilidade({funcionario_id:t,semana:x}),alert("Hor\xe1rios semanais atualizados! ✨")}catch(e){alert("Erro ao salvar hor\xe1rios.")}finally{i(!1)}},k=async()=>{if(!p.data||!p.hora)return alert("Preencha data e hora!");i(!0);try{await m.w.bloquearHorario({...p,funcionario_id:t}),alert("Hor\xe1rio bloqueado com sucesso! \uD83D\uDD12"),g({data:"",hora:"",motivo:""})}catch(e){alert("Erro ao bloquear.")}finally{i(!1)}},S=async()=>{if(!b.data_inicio||!b.data_fim)return alert("Preencha o per\xedodo!");i(!0);try{await m.w.marcarFerias({...b,funcionario_id:t}),alert("F\xe9rias registradas! ✈️"),h({data_inicio:"",data_fim:""})}catch(e){alert("Erro ao registrar f\xe9rias.")}finally{i(!1)}};return(0,s.jsxs)("div",{className:"max-w-5xl mx-auto space-y-8 p-6",children:[(0,s.jsxs)("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h1",{className:"text-3xl md:text-4xl font-black uppercase tracking-tighter leading-tight",children:["Gest\xe3o de ",(0,s.jsx)("span",{className:"text-[#b5820e]",children:"Disponibilidade"})]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm md:text-base font-bold uppercase mt-2 tracking-wide",children:"Configura\xe7\xf5es de Agenda do Profissional ✏️"})]}),(0,s.jsxs)("div",{className:"relative w-full md:w-72",children:[(0,s.jsx)(j.Z,{className:"absolute left-4 top-4 text-[#b5820e]",size:18}),(0,s.jsxs)("select",{className:"w-full p-4 pl-12 bg-gray-50 rounded-2xl font-bold outline-none border-2 border-transparent focus:border-[#b5820e] appearance-none",value:t,onChange:e=>l(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Escolher Profissional..."}),e.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nome},e.id))]})]})]}),t?(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 p-1 bg-gray-100 rounded-3xl w-fit",children:[(0,s.jsx)(z,{active:"semanal"===c,onClick:()=>d("semanal"),icon:(0,s.jsx)(o.Z,{size:16}),label:"Agenda Semanal"}),(0,s.jsx)(z,{active:"bloqueio"===c,onClick:()=>d("bloqueio"),icon:(0,s.jsx)(N.Z,{size:16}),label:"Bloquear Hor\xe1rio"}),(0,s.jsx)(z,{active:"ferias"===c,onClick:()=>d("ferias"),icon:(0,s.jsx)(w.Z,{size:16}),label:"F\xe9rias / Aus\xeancia"})]}),"semanal"===c&&(0,s.jsxs)("div",{className:"space-y-4",children:[x.map((e,a)=>(0,s.jsxs)("div",{className:"p-6 rounded-[2rem] border flex flex-col md:flex-row justify-between items-center transition-all duration-300 \n          ".concat(e.ativo?"bg-white shadow-lg border-gray-200 hover:shadow-xl":"bg-gray-50 opacity-40 border-gray-100","\n        "),children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 w-full md:w-1/3",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.ativo,onChange:e=>{let t=[...x];t[a].ativo=e.target.checked,u(t)},className:"w-6 h-6 accent-[#b5820e] cursor-pointer"}),(0,s.jsxs)("span",{className:"font-black text-xl md:text-xl uppercase tracking-tighter",children:[e.dia," ",e.ativo?"\uD83D\uDFE1":"⚪"]})]}),e.ativo&&(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-4 md:mt-0 w-full md:w-2/3 justify-end",children:[(0,s.jsx)("input",{type:"time",value:e.entrada,onChange:e=>{let t=[...x];t[a].entrada=e.target.value,u(t)},className:"p-3 md:p-4 bg-gray-100 rounded-xl font-bold border border-gray-200 focus:ring-2 focus:ring-[#b5820e]"}),(0,s.jsx)(C,{size:24,className:"text-[#b5820e]"}),(0,s.jsx)("input",{type:"time",value:e.saida,onChange:e=>{let t=[...x];t[a].saida=e.target.value,u(t)},className:"p-3 md:p-4 bg-gray-100 rounded-xl font-bold border border-gray-200 focus:ring-2 focus:ring-[#b5820e]"})]})]},e.dia)),(0,s.jsx)(Z,{onClick:v,loading:n,text:" Atualizar Agenda Semanal"})]}),"bloqueio"===c&&(0,s.jsxs)("div",{className:"bg-white p-10 rounded-[2.5rem] border border-gray-100 shadow-sm space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[(0,s.jsx)(_.Z,{size:20}),(0,s.jsx)("p",{className:"text-xs font-bold uppercase tracking-widest",children:"O hor\xe1rio bloqueado ficar\xe1 indispon\xedvel para agendamentos online."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Data do Bloqueio"}),(0,s.jsx)("input",{type:"date",value:p.data,onChange:e=>g({...p,data:e.target.value}),className:"w-full p-4 bg-gray-50 rounded-2xl font-bold"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Hora (In\xedcio)"}),(0,s.jsx)("input",{type:"time",value:p.hora,onChange:e=>g({...p,hora:e.target.value}),className:"w-full p-4 bg-gray-50 rounded-2xl font-bold"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-gray-400 block mb-2",children:"Motivo (Opcional)"}),(0,s.jsx)("input",{type:"text",placeholder:"Ex: M\xe9dico",value:p.motivo,onChange:e=>g({...p,motivo:e.target.value}),className:"w-full p-4 bg-gray-50 rounded-2xl font-bold"})]})]}),(0,s.jsx)(Z,{onClick:k,loading:n,text:"Confirmar Bloqueio"})]}),"ferias"===c&&(0,s.jsxs)("div",{className:"bg-black text-white p-10 rounded-[2.5rem] shadow-2xl space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 bg-[#b5820e] rounded-2xl text-black",children:(0,s.jsx)(w.Z,{size:24})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-black uppercase italic",children:"Marcar Per\xedodo de Aus\xeancia"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"O profissional n\xe3o aparecer\xe1 na lista de agendamentos nestas datas."})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-[#b5820e]",children:"Data de In\xedcio"}),(0,s.jsx)("input",{type:"date",value:b.data_inicio,onChange:e=>h({...b,data_inicio:e.target.value}),className:"w-full p-5 bg-zinc-900 border border-zinc-800 rounded-2xl font-bold text-white focus:border-[#b5820e] outline-none"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-[#b5820e]",children:"Data de T\xe9rmino"}),(0,s.jsx)("input",{type:"date",value:b.data_fim,onChange:e=>h({...b,data_fim:e.target.value}),className:"w-full p-5 bg-zinc-900 border border-zinc-800 rounded-2xl font-bold text-white focus:border-[#b5820e] outline-none"})]})]}),(0,s.jsx)("button",{onClick:S,disabled:n,className:"w-full py-5 bg-white text-black rounded-2xl font-black uppercase text-sm tracking-widest hover:bg-[#b5820e] transition-colors disabled:opacity-50",children:n?"Processando...":"Registrar Per\xedodo de Folga / F\xe9rias"})]})]}):(0,s.jsxs)("div",{className:"text-center py-20 bg-gray-50 rounded-[3rem] border-2 border-dashed border-gray-200",children:[(0,s.jsx)(y.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,s.jsx)("p",{className:"text-gray-400 font-bold uppercase text-sm tracking-widest",children:"Selecione um profissional para gerir a agenda."})]})]})}function z(e){let{active:a,onClick:t,icon:r,label:l}=e;return(0,s.jsxs)("button",{onClick:t,className:"flex items-center gap-2 px-6 py-3 rounded-2xl font-bold text-xs uppercase transition-all ".concat(a?"bg-white text-[#b5820e] shadow-sm":"text-gray-400 hover:text-gray-600"),children:[r," ",l]})}function Z(e){let{onClick:a,loading:t,text:r}=e;return(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsxs)("button",{onClick:a,disabled:t,className:"bg-black text-[#b5820e] px-10 py-5 rounded-2xl font-black uppercase text-xs tracking-[0.2em] shadow-xl flex items-center gap-3 hover:scale-105 active:scale-95 transition-all disabled:opacity-50",children:[(0,s.jsx)(S.Z,{size:18})," ",t?"A Guardar...":r]})})}/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let A=(0,k.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var E=t(858),M=t(718);function P(e){let{onVoltar:a,onSubmit:t}=e,[l,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)([]),[p,g]=(0,r.useState)(!1),[b,h]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[_,S]=(0,r.useState)(""),[D,z]=(0,r.useState)(""),[Z,P]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{let[e,a,t]=await Promise.all([m.w.listarServicos(),m.w.listarProfissionais(),m.w.listarClientes()]);o(e||[]),d(a||[]),u(t||[])}catch(e){console.error("Erro ao carregar dados",e)}})()},[]);let q=async e=>{if(e.preventDefault(),p){if(!f||!N)return alert("Preencha nome e e-mail.");if(7!==j.length)return alert("O telefone deve ter exatamente 7 d\xedgitos.")}else if(!b)return alert("Selecione um cliente.");if(!k||!_||!D||!Z)return alert("Preencha todos os campos.");n(!0);try{let e={servico_id:Number(k),funcionario_id:Number(_),data_hora_inicio:"".concat(D,"T").concat(Z),cliente_id:p?null:Number(b),novo_cliente_nome:p?f:null,novo_cliente_telefone:p?j:null,novo_cliente_email:p?N:null},s=await m.w.fazerNovoAgendamento(e);alert(s.mensagem||"Agendamento realizado!"),t(),a()}catch(e){var s,r;alert((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.erro)||"Erro ao processar agendamento.")}finally{n(!1)}};return(0,s.jsxs)("div",{className:"max-w-5xl w-full mx-auto bg-white rounded-[3rem] p-8 md:p-12 shadow-2xl border border-gray-100 animate-in fade-in zoom-in duration-300",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,s.jsxs)("button",{onClick:a,className:"text-gray-400 hover:text-black transition-colors flex items-center gap-2 font-bold uppercase text-[10px]",children:[(0,s.jsx)(A,{size:16})," Voltar"]}),(0,s.jsxs)("h2",{className:"text-3xl font-serif font-black uppercase tracking-tighter text-center",children:["Nova ",(0,s.jsx)("span",{className:"text-[#b5820e]",children:"Marca\xe7\xe3o"})]}),(0,s.jsx)("div",{className:"w-16"})]}),(0,s.jsxs)("form",{onSubmit:q,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-amber-50 p-8 rounded-[2.5rem] border border-amber-100 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,s.jsx)("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-4 rounded-2xl text-[10px] font-black uppercase transition-all ".concat(p?"bg-white text-gray-400 border":"bg-black text-white shadow-xl"),children:"Cliente da Casa"}),(0,s.jsxs)("button",{type:"button",onClick:()=>g(!0),className:"flex-1 py-4 rounded-2xl text-[10px] font-black uppercase transition-all ".concat(p?"bg-[#b5820e] text-white shadow-xl":"bg-white text-gray-400 border"),children:[(0,s.jsx)(E.Z,{size:14,className:"inline mr-2"})," Novo Cadastro"]})]}),p?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("input",{placeholder:"Nome Completo",className:"p-4 bg-white rounded-2xl font-bold outline-none shadow-sm border-none focus:ring-2 focus:ring-[#b5820e]",value:f,onChange:e=>v(e.target.value)}),(0,s.jsx)("input",{placeholder:"Telefone (7 d\xedgitos)",className:"p-4 bg-white rounded-2xl font-bold outline-none shadow-sm border-2 border-amber-200 focus:border-[#b5820e]",value:j,onChange:e=>{let a=e.target.value.replace(/\D/g,"");a.length<=7&&y(a)},maxLength:7})]}),(0,s.jsx)("input",{type:"email",placeholder:"E-mail do Cliente",className:"w-full p-4 bg-white rounded-2xl font-bold outline-none shadow-sm border-none focus:ring-2 focus:ring-[#b5820e]",value:N,onChange:e=>w(e.target.value)}),(0,s.jsx)("p",{className:"text-[9px] text-amber-700 font-bold uppercase tracking-wider ml-2 italic",children:"* A senha de acesso ser\xe1 os 7 d\xedgitos do telefone."})]}):(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(M.Z,{className:"absolute left-4 top-4 text-[#b5820e]",size:20}),(0,s.jsxs)("select",{className:"w-full p-4 pl-12 bg-white rounded-2xl font-bold outline-none shadow-sm border-none focus:ring-2 focus:ring-[#b5820e] appearance-none",value:b,onChange:e=>h(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Pesquisar cliente..."}),x.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.nome," - ",e.numero_telefone]},e.id))]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-gray-400 ml-4",children:"Qual o servi\xe7o?"}),(0,s.jsxs)("select",{required:!0,className:"w-full p-4 bg-gray-50 rounded-2xl font-bold outline-none border-none focus:ring-2 focus:ring-[#b5820e]",value:k,onChange:e=>C(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Selecione o servi\xe7o..."}),i.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.nome_servico," (",e.preco,"€)"]},e.id))]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-gray-400 ml-4",children:"Data"}),(0,s.jsx)("input",{type:"date",required:!0,className:"w-full p-4 bg-gray-50 rounded-2xl font-bold outline-none border-none focus:ring-2 focus:ring-[#b5820e]",value:D,onChange:e=>z(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black uppercase text-gray-400 ml-4",children:"Hor\xe1rio"}),(0,s.jsx)("input",{type:"time",required:!0,className:"w-full p-4 bg-gray-50 rounded-2xl font-bold outline-none border-none focus:ring-2 focus:ring-[#b5820e]",value:Z,onChange:e=>P(e.target.value)})]})]}),(0,s.jsx)("button",{type:"submit",disabled:l,className:"w-full py-6 bg-black text-[#b5820e] rounded-[2rem] font-black uppercase tracking-[0.2em] shadow-2xl hover:scale-[1.01] active:scale-95 transition-all disabled:opacity-50",children:l?"Sincronizando...":"Finalizar Agendamento"})]})]})}var q=t(5567),H=t(8854);function F(){let[e,a]=(0,r.useState)("home"),[t,x]=(0,r.useState)([]),[u,g]=(0,r.useState)(!0),[h,j]=(0,r.useState)(null),[y,N]=(0,r.useState)(""),w=new Date().toLocaleDateString("sv-SE"),k=new Date().toLocaleDateString("pt-PT");p().extend(b()),p().extend(f());let C=async()=>{try{g(!0);let e=await m.w.listarMinhaAgenda(),a=(0,q.if)(e).map(e=>{if(!e.data_hora_inicio)return null;let a=p().utc(e.data_hora_inicio).tz("Atlantic/Cape_Verde");return{id:e.id,cliente:e.nome_cliente||"Cliente",telefone:e.telefone_cliente||"",servico:e.profissional_nome?"".concat(e.nome_servico," • ").concat(e.profissional_nome):e.nome_servico,profissional:e.profissional_nome||"N\xe3o definido",dataISO:a.format("YYYY-MM-DD"),data:a.format("YYYY-MM-DDTHH:mm:ss"),hora:a.format("HH:mm"),timestamp:a.valueOf(),status:String(e.status||"pendente").toLowerCase().trim()}}).filter(Boolean);x(a)}catch(e){console.error("Erro ao carregar dados:",e)}finally{g(!1)}};(0,r.useEffect)(()=>{C()},[e]);let _=(0,r.useMemo)(()=>t.filter(e=>e.dataISO===w&&("confirmado"===e.status||"reagendado"===e.status)).sort((e,a)=>e.timestamp-a.timestamp),[t,w]),S=(0,r.useMemo)(()=>t.filter(e=>e.dataISO>w&&("confirmado"===e.status||"reagendado"===e.status)).sort((e,a)=>e.timestamp-a.timestamp),[t,w]),z=(0,r.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let a=e.getTime();return t.filter(e=>"concluido"===e.status.toLowerCase()&&e.timestamp<a).sort((e,a)=>a.timestamp-e.timestamp)},[t]),Z=async e=>{try{g(!0);let a=await m.w.concluirServico(e);(null==a?void 0:a.mensagem)&&(alert(a.mensagem),C())}catch(e){var a,t;alert((null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.erro)||"Erro ao concluir o servi\xe7o.")}finally{g(!1)}},A=async e=>{if(window.confirm("Deseja realmente cancelar este agendamento?"))try{g(!0);let a=await m.w.cancelarAgendamento(e);(null==a?void 0:a.mensagem)&&(alert(a.mensagem),C())}catch(e){var a,t;alert((null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.erro)||"Erro ao cancelar.")}finally{g(!1)}},E=async()=>{if(!y)return alert("Selecione a nova data e hora.");try{await m.w.reagendarAgendamento(h.id,{nova_data_hora:y}),alert("Reagendado com sucesso! ✅"),j(null),N(""),C()}catch(t){var e,a;console.error(t),alert((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.erro)||"Erro ao reagendar.")}};return(0,s.jsxs)("div",{className:"min-h-screen bg-white p-6 md:p-10",children:[(0,s.jsxs)("section",{className:"mb-10 flex flex-col md:flex-row justify-between items-start md:items-end border-b border-gray-100 pb-10 gap-6",children:[(0,s.jsxs)("div",{children:["home"!==e&&(0,s.jsxs)("button",{onClick:()=>a("home"),className:"flex items-center gap-2 text-[#b5820e] font-bold text-xs uppercase mb-4 hover:underline",children:[(0,s.jsx)(l.Z,{size:16})," Voltar ao In\xedcio"]}),"home"===e&&(0,s.jsxs)("section",{children:[(0,s.jsx)("h1",{className:"md:text-4xl text-2xl font-serif font-black text-black",children:"Painel da Recepcionista"}),(0,s.jsxs)("p",{className:"mt-4 max-w-2xl text-gray-700 text-sm md:text-base leading-relaxed",children:[(0,s.jsx)("span",{className:"font-bold text-gray-900 text-lg md:text-xl",children:"Ol\xe1, seja bem-vinda! \uD83D\uDC4B✨"}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Aqui voc\xea"," ",(0,s.jsx)("span",{className:"font-semibold text-[#b5820e]",children:"gere agendamentos \uD83D\uDCC5"}),", atende clientes e mant\xe9m tudo organizado de forma pr\xe1tica e eficiente."]})]})]})]}),(0,s.jsxs)("div",{className:"bg-amber-50 text-[#b5820e] px-6 py-2 rounded-xl shadow-sm border border-amber-100 flex items-center gap-3",children:[(0,s.jsx)(n.Z,{size:14}),(0,s.jsx)("span",{className:"text-xs font-bold uppercase",children:new Date().toLocaleDateString("pt-PT",{day:"2-digit",month:"long",year:"numeric"})})]})]}),u?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-amber-200 border-t-amber-600 rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-gray-400 italic",children:"Sincronizando agenda..."})]}):(0,s.jsxs)(s.Fragment,{children:["home"===e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-7 mb-12",children:[(0,s.jsx)(O,{title:"Agendamentos de Hoje",value:_.length,icon:i.Z}),(0,s.jsx)(O,{title:"Agendamentos Futuros",value:S.length,icon:o.Z,onClick:()=>a("agenda")}),(0,s.jsx)(O,{title:"Hist\xf3rico de Agendamentos Passados",value:z.length,icon:n.Z,onClick:()=>a("historico")}),(0,s.jsx)(O,{title:" Agenda dos Funcionarios",value:"VER",icon:c.Z,onClick:()=>a("ver")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-20",children:[(0,s.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-black text-black uppercase italic mb-2",children:"Agenda de Hoje"}),(0,s.jsx)("span",{className:"text-sm text-[#b5820e] font-bold",children:k}),(0,s.jsx)("div",{className:"space-y-4",children:_.length>0?_.map(e=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(v.u,{...e,onCancelar:()=>A(e.id),onRemarcar:()=>j(e)}),("confirmado"===e.status||"reagendado"===e.status)&&(0,s.jsxs)("button",{onClick:a=>{a.stopPropagation(),Z(e.id)},className:"absolute top-4 right-16 flex items-center gap-2 bg-green-600 text-white px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase hover:bg-green-700 transition-all shadow-md z-10",children:[(0,s.jsx)(d.Z,{size:14})," Concluir"]})]},e.id)):(0,s.jsxs)("div",{className:"p-10 border-2 border-dashed rounded-3xl text-center text-gray-400 italic",children:["Nenhum atendimento confirmado para hoje (",k,")."]})})]}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-black rounded-[2.5rem] p-10 md:mb-30 text-white shadow-2xl relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-black/10 flex gap-5 group-hover/btn:bg-black/5 p-1 rounded-lg transition-colors md:mb-2",children:[(0,s.jsx)(n.Z,{size:27}),(0,s.jsxs)("h3",{className:"text-xl font-bold text-[#b5820e] mb-4 uppercase tracking-widest",children:[(0,s.jsx)("span",{className:"text-white",children:" Configurar"})," ",(0,s.jsx)("br",{})," ","Minha Agenda"]})]}),(0,s.jsx)("p",{className:"text-gray-400 text-xs mb-8 leading-relaxed",children:"Gerencie sua disponibilidade di\xe1ria, mensal e anual para o sistema automatizado."}),(0,s.jsx)("button",{onClick:()=>a("disponibilidade"),className:"w-full py-5 bg-[#b5820e] text-black rounded-2xl font-black uppercase text-xs tracking-widest hover:opacity-90 transition shadow-lg",children:"Configurar Disponibilidade"})]}),(0,s.jsx)(T,{onClick:()=>a("novo")})]})]})]}),"historico"===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-extrabold text-gray-900 uppercase tracking-tight flex items-center gap-2",children:"\uD83D\uDD52 Hist\xf3rico de Agendamentos Passados"}),(0,s.jsxs)("p",{className:"mt-2 text-gray-600 text-sm md:text-base leading-relaxed",children:["Aqui voc\xea confere todos os agendamentos"," ",(0,s.jsx)("span",{className:"font-semibold text-[#b5820e]",children:"conclu\xeddos"}),"."]})]}),(0,s.jsx)("div",{className:"space-y-4",children:z.map(e=>(0,s.jsx)(v.u,{...e,clickable:!1},e.id))})]}),"agenda"===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-extrabold text-gray-900 uppercase tracking-tight flex items-center gap-2",children:"\uD83D\uDCC5 Pr\xf3ximos Agendamentos"}),(0,s.jsxs)("p",{className:"mt-2 text-gray-600 text-sm md:text-base leading-relaxed",children:["Aqui voc\xea acompanha todos os agendamentos"," ",(0,s.jsx)("span",{className:"font-semibold text-[#b5820e]",children:"confirmados"})," ","para os pr\xf3ximos dias."]})]}),(0,s.jsx)("div",{className:"space-y-4",children:S.map(e=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(v.u,{...e,onCancelar:()=>A(e.id)}),(0,s.jsx)("button",{onClick:()=>Z(e.id),className:"absolute top-4 right-16 bg-green-600 text-white px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase z-10",children:"Concluir"})]},e.id))})]})]}),"disponibilidade"===e&&(0,s.jsx)(D,{}),"ver"===e&&(0,s.jsx)(H.Z,{}),"novo"===e&&(0,s.jsx)(P,{onVoltar:()=>a("home"),onSubmit:C}),h&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-[2rem] p-8 max-w-md w-full shadow-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-black mb-2 uppercase",children:"Remarcar Atendimento"}),(0,s.jsxs)("p",{className:"text-gray-500 text-sm mb-6",children:["Cliente: ",(0,s.jsx)("strong",{children:h.cliente})]}),(0,s.jsx)("label",{className:"block text-[10px] font-black uppercase text-gray-400 mb-2",children:"Nova Data e Hora"}),(0,s.jsx)("input",{type:"datetime-local",className:"w-full p-4 bg-gray-100 rounded-xl mb-6 font-bold",value:y,onChange:e=>N(e.target.value)}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>j(null),className:"flex-1 py-4 font-bold text-gray-400 uppercase text-xs",children:"Voltar"}),(0,s.jsx)("button",{onClick:E,className:"flex-1 py-4 bg-[#b5820e] text-white rounded-xl font-black uppercase text-xs shadow-lg",children:"Confirmar Reagendamento"})]})]})})]})}function O(e){let{title:a,value:t,icon:r,onClick:l}=e;return(0,s.jsxs)("div",{onClick:l,className:"bg-white p-6 rounded-3xl border border-gray-200 shadow-sm cursor-pointer hover:-translate-y-1 transition-all",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gray-50 flex items-center justify-center mb-4",children:(0,s.jsx)(r,{size:24,className:"text-[#b5820e]"})}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:a}),(0,s.jsx)("p",{className:"text-2xl font-black text-gray-900",children:t})]})}function T(e){let{onClick:a}=e;return(0,s.jsxs)("div",{className:"relative overflow-hidden bg-black rounded-[3rem] p-10 text-white shadow-2xl group transition-all duration-500 hover:scale-[1.01] flex flex-col justify-between min-h-[320px]",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#b5820e]/10 rounded-full -mr-20 -mt-20 blur-3xl group-hover:bg-[#b5820e]/20 transition-colors duration-700"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-[#b5820e] rounded-2xl flex items-center justify-center mb-4 rotate-3 group-hover:rotate-0 transition-transform duration-500 shadow-[0_10px_30px_rgba(181,130,14,0.3)]",children:(0,s.jsx)(x.Z,{size:22,className:"text-black stroke-[3px]"})}),(0,s.jsxs)("h3",{className:"text-2xl font-serif font-bold text-white mb-4 italic leading-tight",children:["Cria ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-[#b5820e] not-italic uppercase tracking-tighter",children:"Novo Agendamento"})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm max-w-[300px] leading-relaxed",children:"Agilize o atendimento registrando agendamento."})]}),(0,s.jsxs)("button",{onClick:a,className:"relative z-10 mt-8 w-full group/btn flex items-center justify-between bg-[#b5820e] hover:bg-white text-black px-6 py-5 rounded-2xl font-black uppercase text-[10px] tracking-[0.2em] transition-all duration-300",children:[(0,s.jsx)("span",{children:"Criar Agendamento"}),(0,s.jsx)("div",{className:"bg-black/10 group-hover/btn:bg-black/5 p-1 rounded-lg transition-colors",children:(0,s.jsx)(n.Z,{size:18})})]})]})}}},function(e){e.O(0,[432,85,888,774,179],function(){return e(e.s=1491)}),_N_E=e.O()}]);