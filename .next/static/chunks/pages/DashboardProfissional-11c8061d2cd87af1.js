(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{750:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DashboardProfissional",function(){return t(4355)}])},4355:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return _}});var s=t(5893),o=t(7294),i=t(7553),r=t(8088),n=t(7969),l=t(7218);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,t(1462).Z)("ListCheck",[["path",{d:"M11 18H3",key:"n3j2dh"}],["path",{d:"m15 18 2 2 4-4",key:"1szwhi"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M16 6H3",key:"1wxfjs"}]]);var d=t(4279);let m={listarMinhaAgenda:async e=>{try{return(await d.Z.get("/funcionario/listar-agendamentos",{params:e?{data:e}:{}})).data}catch(e){throw console.error("Erro ao listar agenda:",e),e}},verHistorico:async()=>{try{return(await d.Z.get("/funcionario/historico")).data}catch(e){throw console.error("Erro ao ver hist\xf3rico:",e),e}},obterPerfil:async()=>{try{return(await d.Z.get("/funcionario/perfil-resumo")).data}catch(e){return{nome:localStorage.getItem("usuario_nome")||"Profissional",servico_associado:localStorage.getItem("usuario_servico")||"Servi\xe7o",avaliacao:4.9,estatisticas:{total_agendamentos:0}}}}};var x=t(7065),h=t(5567),u=t(7484),p=t.n(u),g=t(178),f=t.n(g),b=t(9387),j=t.n(b),v=t(8854);p().extend(f()),p().extend(j());let N="Atlantic/Cape_Verde";function _(){let[e,a]=(0,o.useState)("home"),[t,d]=(0,o.useState)([]),[u,g]=(0,o.useState)(null),[f,b]=(0,o.useState)(!0),j=e=>({iso:e.format("YYYY-MM-DD"),display:e.format("DD/MM/YYYY")}),_=(0,o.useMemo)(()=>j(p()().tz(N)),[]),w=async()=>{try{b(!0);let[e,a,t]=await Promise.all([m.listarMinhaAgenda(""),m.verHistorico(),m.obterPerfil()]);console.log("DADOS DO PERFIL QUE CHEGARAM:",t),g(t);let s=[...(0,h.if)(e),...(0,h.if)(a)].map(e=>{let a=e.data_hora_inicio;if(!a)return null;let t=p().utc(a).tz(N),s=j(t),o=t.format("HH:mm");return{...e,id:e.id,cliente:e.nome_cliente||"Cliente",telefone:e.telefone_cliente||"Sem telefone",servico:e.nome_servico||"Servi\xe7o n\xe3o informado",hora:o,data_hora_inicio:t.toDate(),dataFormatada:s.display,data:t.toDate(),status:(e.status||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),dataIso:s.iso,timestamp:t.valueOf()}}).filter(Boolean);d(s)}catch(e){console.error("Erro ao carregar:",e)}finally{b(!1)}};(0,o.useEffect)(()=>{w()},[]);let k=(0,o.useMemo)(()=>t.filter(e=>e.dataIso===_.iso&&("confirmado"===e.status||"reagendado"===e.status)).sort((e,a)=>new Date(e.data_hora_inicio).getTime()-new Date(a.data_hora_inicio).getTime()),[t,_.iso]),D=(0,o.useMemo)(()=>t.filter(e=>e.dataIso>_.iso&&["confirmado","reagendado"].includes(e.status)).sort((e,a)=>e.data_hora_inicio.getTime()-a.data_hora_inicio.getTime()),[t,_.iso]),C=(0,o.useMemo)(()=>{let e=new Date;return e.setHours(0,0,0,0),t.filter(a=>"concluido"===a.status&&new Date(a.data_hora_inicio)<e).sort((e,a)=>new Date(a.data_hora_inicio).getTime()-new Date(e.data_hora_inicio).getTime())},[t]);return(0,s.jsxs)("div",{className:"min-h-screen bg-white p-6 md:p-10",children:["home"!==e&&(0,s.jsxs)("button",{onClick:()=>a("home"),className:"flex items-center gap-2 text-[#b5820e] text-xs uppercase font-bold mb-4  hover:text-[#d29f00] hover:underline transition-colors duration-200",children:[(0,s.jsx)(i.Z,{size:16,className:"shadow-sm"})," Voltar ao In\xedcio"]}),"home"===e&&(0,s.jsxs)("section",{className:"mb-8 border-b pb-6 flex flex-col md:flex-row justify-between items-start md:items-end gap-6",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"bg-white p-4 md:p-4 ",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-extrabold text-black mb-2",children:"Painel do Profissional"}),(0,s.jsxs)("h2",{className:"text-xl md:text-2xl font-bold text-gray-700 mb-1",children:["Ol\xe1, ",(0,s.jsx)("span",{className:"text-[#b5820e]",children:null==u?void 0:u.nome})]}),(null==u?void 0:u.servico_associado)&&(0,s.jsxs)("p",{className:"text-sm md:text-base text-gray-500 font-medium mb-2 flex items-center gap-1",children:["Servi\xe7o:"," ",(0,s.jsx)("span",{className:"text-[#b5820e]",children:u.servico_associado})]}),(0,s.jsxs)("p",{className:"text-gray-600 italic text-sm md:text-base leading-relaxed",children:["Este \xe9 o seu espa\xe7o para ",(0,s.jsx)("span",{className:"font-semibold",children:"gerir sua agenda"}),", acompanhar seus clientes e manter tudo organizado. ",(0,s.jsx)("br",{}),"Estamos prontos para apoiar voc\xea em cada atendimento \uD83D\uDCBC✂️"]})]})}),(0,s.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-3 bg-amber-50 px-6 py-2 rounded-xl shadow-sm border border-amber-100",children:[(0,s.jsx)(r.Z,{size:20,className:"text-[#b5820e]"}),(0,s.jsx)("span",{className:"text-xs font-bold uppercase text-[#b5820e]",children:new Date().toLocaleDateString("pt-PT",{day:"2-digit",month:"long",year:"numeric"})})]})]}),f?(0,s.jsx)("p",{className:"text-center py-20 text-gray-400 animate-pulse",children:"Carregando sua agenda..."}):(0,s.jsxs)(s.Fragment,{children:["home"===e&&(0,s.jsxs)("div",{className:"space-y-10",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-6",children:[(0,s.jsx)(y,{title:"Agendamentos de hoje",value:k.length,icon:n.Z})," ",(0,s.jsx)(y,{title:"agendamentos futuros",value:D.length,icon:r.Z,onClick:()=>a("agenda")}),(0,s.jsx)(y,{title:"Agendamentos Conclu\xeddos",value:C.length,icon:l.Z,onClick:()=>a("historico")})," ",(0,s.jsx)(y,{title:"Ver minha agenda",value:"",icon:c,onClick:()=>a("ver")})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border-l-4 border-[#b5820e] pl-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-black uppercase text-gray-800",children:"Agenda de Hoje"}),(0,s.jsx)("span",{className:"text-sm text-[#b5820e] font-bold",children:_.display})]}),(0,s.jsx)("div",{className:"mt-6 space-y-4",children:k.length>0?k.map(e=>(0,s.jsx)(x.u,{...e},e.id)):(0,s.jsxs)("div",{className:"p-10 border-2 border-dashed rounded-3xl text-center text-gray-400 italic",children:["Nenhum agendamento para hoje (",_.display,").",t.length>0&&" Existem agendamentos em outras datas."]})})]})]}),"agenda"===e&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-black mb-6 uppercase",children:"Minha Agenda Completa"}),D.length>0?D.map(e=>(0,s.jsx)(x.u,{...e},e.id)):(0,s.jsx)("p",{className:"text-gray-500",children:"Nenhum servi\xe7o futuro."})]}),"historico"===e&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-black mb-6 uppercase text-green-700",children:"Meu Hist\xf3rico"}),C.length>0?C.map(e=>(0,s.jsx)(x.u,{...e,clickable:!1},e.id)):(0,s.jsx)("p",{className:"text-gray-500",children:"Nenhum servi\xe7o conclu\xeddo ainda."})]}),"ver"===e&&(0,s.jsx)(v.Z,{})]})]})}function y(e){let{title:a,value:t,icon:o,onClick:i}=e;return(0,s.jsxs)("div",{onClick:i,className:"bg-white border border-[#b5820e] rounded-3xl p-8 cursor-pointer shadow-sm hover:shadow-md transition-all active:scale-95",children:[(0,s.jsx)(o,{size:24,className:"text-[#b5820e] mb-4"}),(0,s.jsx)("p",{className:"text-[10px] uppercase text-gray-400 font-black tracking-widest",children:a}),(0,s.jsx)("p",{className:"text-3xl font-black text-black mt-1",children:t})]})}}},function(e){e.O(0,[432,85,888,774,179],function(){return e(e.s=750)}),_N_E=e.O()}]);